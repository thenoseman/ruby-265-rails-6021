<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Bundler::Resolver</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Class</span>
            Bundler::Resolver
            
                <span class="parent">&lt;
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/bundler/resolver_rb.html">lib/bundler/resolver.rb</a></li>
            
            <li><a href="../../files/lib/bundler/resolver/spec_group_rb.html">lib/bundler/resolver/spec_group.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">CLASS</span>
          <a href="Resolver/SpecGroup.html">Bundler::Resolver::SpecGroup</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-after_resolution">after_resolution</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-before_resolution">before_resolution</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-debug">debug</a>,
              </li>
            
              
              <li>
                <a href="#method-i-debug-3F">debug?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-dependencies_for">dependencies_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-index_for">index_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-indicate_progress">indicate_progress</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-name_for">name_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-name_for_explicit_dependency_source">name_for_explicit_dependency_source</a>,
              </li>
            
              
              <li>
                <a href="#method-i-name_for_locking_dependency_source">name_for_locking_dependency_source</a>,
              </li>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-platform_sort_key">platform_sort_key</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-relevant_sources_for_vertex">relevant_sources_for_vertex</a>,
              </li>
            
              
              <li>
                <a href="#method-i-requirement_satisfied_by-3F">requirement_satisfied_by?</a>,
              </li>
            
              
              <li>
                <a href="#method-c-resolve">resolve</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-search_for">search_for</a>,
              </li>
            
              
              <li>
                <a href="#method-i-sort_dependencies">sort_dependencies</a>,
              </li>
            
              
              <li>
                <a href="#method-c-sort_platforms">sort_platforms</a>,
              </li>
            
              
              <li>
                <a href="#method-i-start">start</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="Molinillo/UI.html">
              Bundler::Molinillo::UI
            </a>
          
        </li>
      
        <li>
          
            <a href="Molinillo/SpecificationProvider.html">
              Bundler::Molinillo::SpecificationProvider
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(index, source_requirements, base, gem_version_promoter, additional_base_requirements, platforms)
            
            <a href="../../classes/Bundler/Resolver.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 26</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">source_requirements</span>, <span class="ruby-identifier">base</span>, <span class="ruby-identifier">gem_version_promoter</span>, <span class="ruby-identifier">additional_base_requirements</span>, <span class="ruby-identifier">platforms</span>)
  <span class="ruby-ivar">@index</span> = <span class="ruby-identifier">index</span>
  <span class="ruby-ivar">@source_requirements</span> = <span class="ruby-identifier">source_requirements</span>
  <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">base</span>
  <span class="ruby-ivar">@resolver</span> = <span class="ruby-constant">Molinillo</span><span class="ruby-operator">::</span><span class="ruby-constant">Resolver</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-ivar">@search_for</span> = {}
  <span class="ruby-ivar">@base_dg</span> = <span class="ruby-constant">Molinillo</span><span class="ruby-operator">::</span><span class="ruby-constant">DependencyGraph</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ls</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">dep</span> = <span class="ruby-constant">Dependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ls</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ls</span>.<span class="ruby-identifier">version</span>)
    <span class="ruby-ivar">@base_dg</span>.<span class="ruby-identifier">add_vertex</span>(<span class="ruby-identifier">ls</span>.<span class="ruby-identifier">name</span>, <span class="ruby-constant">DepProxy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dep</span>, <span class="ruby-identifier">ls</span>.<span class="ruby-identifier">platform</span>), <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">additional_base_requirements</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@base_dg</span>.<span class="ruby-identifier">add_vertex</span>(<span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">d</span>) }
  <span class="ruby-ivar">@platforms</span> = <span class="ruby-identifier">platforms</span>
  <span class="ruby-ivar">@gem_version_promoter</span> = <span class="ruby-identifier">gem_version_promoter</span>
  <span class="ruby-ivar">@allow_bundler_dependency_conflicts</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">feature_flag</span>.<span class="ruby-identifier">allow_bundler_dependency_conflicts?</span>
  <span class="ruby-ivar">@lockfile_uses_separate_rubygems_sources</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">feature_flag</span>.<span class="ruby-identifier">lockfile_uses_separate_rubygems_sources?</span>
  <span class="ruby-ivar">@use_gvp</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">feature_flag</span>.<span class="ruby-identifier">use_gem_version_promoter_for_major_updates?</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@gem_version_promoter</span>.<span class="ruby-identifier">major?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-platform_sort_key">
            
              <b>platform_sort_key</b>(platform)
            
            <a href="../../classes/Bundler/Resolver.html#method-c-platform_sort_key" name="method-c-platform_sort_key" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-platform_sort_key_source')" id="l_method-c-platform_sort_key_source">show</a>
                
              </p>
              <div id="method-c-platform_sort_key_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 222</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">platform_sort_key</span>(<span class="ruby-identifier">platform</span>)
  <span class="ruby-keyword">return</span> [<span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-string">&quot;&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Platform</span><span class="ruby-operator">::</span><span class="ruby-constant">RUBY</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">platform</span>
  <span class="ruby-identifier">platform</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">part</span><span class="ruby-operator">|</span> <span class="ruby-identifier">part</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-resolve">
            
              <b>resolve</b>(requirements, index, source_requirements = {}, base = [], gem_version_promoter = GemVersionPromoter.new, additional_base_requirements = [], platforms = nil)
            
            <a href="../../classes/Bundler/Resolver.html#method-c-resolve" name="method-c-resolve" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Figures out the best possible configuration of gems that satisfies the list
of passed dependencies and any child dependencies without causing any gem
activation errors.</p>

<h4 id="method-c-resolve-label-Parameters">Parameters</h4>
<dl class="rdoc-list note-list"><dt>*dependencies&lt;Gem::Dependency&gt;
<dd>
<p>The list of dependencies to resolve</p>
</dd></dl>

<h4 id="method-c-resolve-label-Returns">Returns</h4>
<dl class="rdoc-list note-list"><dt>&lt;GemBundle&gt;,nil
<dd>
<p>If the list of dependencies can be resolved, a</p>
</dd></dl>

<pre><code>collection of gemspecs is returned. Otherwise, nil is returned.</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-resolve_source')" id="l_method-c-resolve_source">show</a>
                
              </p>
              <div id="method-c-resolve_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">requirements</span>, <span class="ruby-identifier">index</span>, <span class="ruby-identifier">source_requirements</span> = {}, <span class="ruby-identifier">base</span> = [], <span class="ruby-identifier">gem_version_promoter</span> = <span class="ruby-constant">GemVersionPromoter</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">additional_base_requirements</span> = [], <span class="ruby-identifier">platforms</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">platforms</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">platforms</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">platforms</span>
  <span class="ruby-identifier">base</span> = <span class="ruby-constant">SpecSet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">base</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">base</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">SpecSet</span>)
  <span class="ruby-identifier">resolver</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">source_requirements</span>, <span class="ruby-identifier">base</span>, <span class="ruby-identifier">gem_version_promoter</span>, <span class="ruby-identifier">additional_base_requirements</span>, <span class="ruby-identifier">platforms</span>)
  <span class="ruby-identifier">result</span> = <span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">start</span>(<span class="ruby-identifier">requirements</span>)
  <span class="ruby-constant">SpecSet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">result</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-sort_platforms">
            
              <b>sort_platforms</b>(platforms)
            
            <a href="../../classes/Bundler/Resolver.html#method-c-sort_platforms" name="method-c-sort_platforms" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Sort platforms from most general to most specific</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-sort_platforms_source')" id="l_method-c-sort_platforms_source">show</a>
                
              </p>
              <div id="method-c-sort_platforms_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 216</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">sort_platforms</span>(<span class="ruby-identifier">platforms</span>)
  <span class="ruby-identifier">platforms</span>.<span class="ruby-identifier">sort_by</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">platform</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">platform_sort_key</span>(<span class="ruby-identifier">platform</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-after_resolution">
            
              <b>after_resolution</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-after_resolution" name="method-i-after_resolution" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-after_resolution_source')" id="l_method-i-after_resolution_source">show</a>
                
              </p>
              <div id="method-i-after_resolution_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">after_resolution</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-before_resolution">
            
              <b>before_resolution</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-before_resolution" name="method-i-before_resolution" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-before_resolution_source')" id="l_method-i-before_resolution_source">show</a>
                
              </p>
              <div id="method-i-before_resolution_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">before_resolution</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;Resolving dependencies...&quot;</span>, <span class="ruby-identifier">debug?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-debug">
            
              <b>debug</b>(depth = 0)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-debug" name="method-i-debug" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Conveys debug information to the user.</p>

<p>@param [Integer] depth the current depth of the resolution process. @return
[void]</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-debug_source')" id="l_method-i-debug_source">show</a>
                
              </p>
              <div id="method-i-debug_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">debug</span>(<span class="ruby-identifier">depth</span> = <span class="ruby-number">0</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">debug?</span>
  <span class="ruby-identifier">debug_info</span> = <span class="ruby-keyword">yield</span>
  <span class="ruby-identifier">debug_info</span> = <span class="ruby-identifier">debug_info</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">debug_info</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
  <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">debug_info</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\n&quot;</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-string">&quot;  &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">depth</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">s</span> }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-debug-3F">
            
              <b>debug?</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-debug-3F" name="method-i-debug-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-debug-3F_source')" id="l_method-i-debug-3F_source">show</a>
                
              </p>
              <div id="method-i-debug-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">debug?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@debug_mode</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@debug_mode</span>)
  <span class="ruby-ivar">@debug_mode</span> = <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;DEBUG_RESOLVER&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">&quot;DEBUG_RESOLVER_TREE&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-dependencies_for">
            
              <b>dependencies_for</b>(specification)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-dependencies_for" name="method-i-dependencies_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-dependencies_for_source')" id="l_method-i-dependencies_for_source">show</a>
                
              </p>
              <div id="method-i-dependencies_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">dependencies_for</span>(<span class="ruby-identifier">specification</span>)
  <span class="ruby-identifier">specification</span>.<span class="ruby-identifier">dependencies_for_activated_platforms</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-index_for">
            
              <b>index_for</b>(dependency)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-index_for" name="method-i-index_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-index_for_source')" id="l_method-i-index_for_source">show</a>
                
              </p>
              <div id="method-i-index_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">index_for</span>(<span class="ruby-identifier">dependency</span>)
  <span class="ruby-identifier">source</span> = <span class="ruby-ivar">@source_requirements</span>[<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">source</span>
    <span class="ruby-identifier">source</span>.<span class="ruby-identifier">specs</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@lockfile_uses_separate_rubygems_sources</span>
    <span class="ruby-constant">Index</span>.<span class="ruby-identifier">build</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">all_sources</span>
        <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">all_sources</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">idx</span>.<span class="ruby-identifier">add_source</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">specs</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span> }
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">idx</span>.<span class="ruby-identifier">add_source</span> <span class="ruby-ivar">@source_requirements</span>[<span class="ruby-value">:default</span>].<span class="ruby-identifier">specs</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@index</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-indicate_progress">
            
              <b>indicate_progress</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-indicate_progress" name="method-i-indicate_progress" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-indicate_progress_source')" id="l_method-i-indicate_progress_source">show</a>
                
              </p>
              <div id="method-i-indicate_progress_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 91</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">indicate_progress</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">ui</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;.&quot;</span>, <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">debug?</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-name_for">
            
              <b>name_for</b>(dependency)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-name_for" name="method-i-name_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-name_for_source')" id="l_method-i-name_for_source">show</a>
                
              </p>
              <div id="method-i-name_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 166</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">name_for</span>(<span class="ruby-identifier">dependency</span>)
  <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-name_for_explicit_dependency_source">
            
              <b>name_for_explicit_dependency_source</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-name_for_explicit_dependency_source" name="method-i-name_for_explicit_dependency_source" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-name_for_explicit_dependency_source_source')" id="l_method-i-name_for_explicit_dependency_source_source">show</a>
                
              </p>
              <div id="method-i-name_for_explicit_dependency_source_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">name_for_explicit_dependency_source</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_gemfile</span>.<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-string">&quot;Gemfile&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-name_for_locking_dependency_source">
            
              <b>name_for_locking_dependency_source</b>()
            
            <a href="../../classes/Bundler/Resolver.html#method-i-name_for_locking_dependency_source" name="method-i-name_for_locking_dependency_source" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-name_for_locking_dependency_source_source')" id="l_method-i-name_for_locking_dependency_source_source">show</a>
                
              </p>
              <div id="method-i-name_for_locking_dependency_source_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">name_for_locking_dependency_source</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">default_lockfile</span>.<span class="ruby-identifier">basename</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">rescue</span>
  <span class="ruby-string">&quot;Gemfile.lock&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-relevant_sources_for_vertex">
            
              <b>relevant_sources_for_vertex</b>(vertex)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-relevant_sources_for_vertex" name="method-i-relevant_sources_for_vertex" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-relevant_sources_for_vertex_source')" id="l_method-i-relevant_sources_for_vertex_source">show</a>
                
              </p>
              <div id="method-i-relevant_sources_for_vertex_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">relevant_sources_for_vertex</span>(<span class="ruby-identifier">vertex</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">root?</span>
    [<span class="ruby-ivar">@source_requirements</span>[<span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">name</span>]]
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@lockfile_uses_separate_rubygems_sources</span>
    <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">recursive_predecessors</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-ivar">@source_requirements</span>[<span class="ruby-identifier">v</span>.<span class="ruby-identifier">name</span>]
    <span class="ruby-keyword">end</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@source_requirements</span>[<span class="ruby-value">:default</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-requirement_satisfied_by-3F">
            
              <b>requirement_satisfied_by?</b>(requirement, activated, spec)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-requirement_satisfied_by-3F" name="method-i-requirement_satisfied_by-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-requirement_satisfied_by-3F_source')" id="l_method-i-requirement_satisfied_by-3F_source">show</a>
                
              </p>
              <div id="method-i-requirement_satisfied_by-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">requirement_satisfied_by?</span>(<span class="ruby-identifier">requirement</span>, <span class="ruby-identifier">activated</span>, <span class="ruby-identifier">spec</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">requirement</span>.<span class="ruby-identifier">matches_spec?</span>(<span class="ruby-identifier">spec</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Gemspec</span>)
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">activate_platform!</span>(<span class="ruby-identifier">requirement</span>.<span class="ruby-identifier">__platform</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@platforms</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@platforms</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">requirement</span>.<span class="ruby-identifier">__platform</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-search_for">
            
              <b>search_for</b>(dependency)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-search_for" name="method-i-search_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-search_for_source')" id="l_method-i-search_for_source">show</a>
                
              </p>
              <div id="method-i-search_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">search_for</span>(<span class="ruby-identifier">dependency</span>)
  <span class="ruby-identifier">platform</span> = <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">__platform</span>
  <span class="ruby-identifier">dependency</span> = <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">dep</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Gem</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependency</span>
  <span class="ruby-identifier">search</span> = <span class="ruby-ivar">@search_for</span>[<span class="ruby-identifier">dependency</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">index</span> = <span class="ruby-identifier">index_for</span>(<span class="ruby-identifier">dependency</span>)
    <span class="ruby-identifier">results</span> = <span class="ruby-identifier">index</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">dependency</span>, <span class="ruby-ivar">@base</span>[<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>])

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">vertex</span> = <span class="ruby-ivar">@base_dg</span>.<span class="ruby-identifier">vertex_named</span>(<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">locked_requirement</span> = <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">payload</span>.<span class="ruby-identifier">requirement</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@prerelease_specified</span>[<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-operator">!</span><span class="ruby-ivar">@use_gvp</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">locked_requirement</span>.<span class="ruby-identifier">nil?</span>)
      <span class="ruby-comment"># Move prereleases to the beginning of the list, so they&#39;re considered</span>
      <span class="ruby-comment"># last during resolution.</span>
      <span class="ruby-identifier">pre</span>, <span class="ruby-identifier">results</span> = <span class="ruby-identifier">results</span>.<span class="ruby-identifier">partition</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">prerelease?</span> }
      <span class="ruby-identifier">results</span> = <span class="ruby-identifier">pre</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">results</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">spec_groups</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">results</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-identifier">nested</span> = []
      <span class="ruby-identifier">results</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">spec</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">version</span>, <span class="ruby-identifier">specs</span> = <span class="ruby-identifier">nested</span>.<span class="ruby-identifier">last</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span>
          <span class="ruby-identifier">specs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">nested</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">spec</span>.<span class="ruby-identifier">version</span>, [<span class="ruby-identifier">spec</span>]]
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">nested</span>.<span class="ruby-identifier">reduce</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">groups</span>, (<span class="ruby-identifier">version</span>, <span class="ruby-identifier">specs</span>)<span class="ruby-operator">|</span>
        <span class="ruby-keyword">next</span> <span class="ruby-identifier">groups</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">locked_requirement</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">locked_requirement</span>.<span class="ruby-identifier">satisfied_by?</span>(<span class="ruby-identifier">version</span>)
        <span class="ruby-identifier">spec_group</span> = <span class="ruby-constant">SpecGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">specs</span>)
        <span class="ruby-identifier">spec_group</span>.<span class="ruby-identifier">ignores_bundler_dependencies</span> = <span class="ruby-ivar">@allow_bundler_dependency_conflicts</span>
        <span class="ruby-identifier">groups</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec_group</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      []
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment"># GVP handles major itself, but it&#39;s still a bit risky to trust it with it</span>
    <span class="ruby-comment"># until we get it settled with new behavior. For 2.x it can take over all cases.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@use_gvp</span>
      <span class="ruby-identifier">spec_groups</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@gem_version_promoter</span>.<span class="ruby-identifier">sort_versions</span>(<span class="ruby-identifier">dependency</span>, <span class="ruby-identifier">spec_groups</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">search</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sg</span>.<span class="ruby-identifier">for?</span>(<span class="ruby-identifier">platform</span>) }.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sg</span>.<span class="ruby-identifier">activate_platform!</span>(<span class="ruby-identifier">platform</span>) }
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sort_dependencies">
            
              <b>sort_dependencies</b>(dependencies, activated, conflicts)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-sort_dependencies" name="method-i-sort_dependencies" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-sort_dependencies_source')" id="l_method-i-sort_dependencies_source">show</a>
                
              </p>
              <div id="method-i-sort_dependencies_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">sort_dependencies</span>(<span class="ruby-identifier">dependencies</span>, <span class="ruby-identifier">activated</span>, <span class="ruby-identifier">conflicts</span>)
  <span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">sort_by</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dependency</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">all_sources</span> = <span class="ruby-identifier">relevant_sources_for_vertex</span>(<span class="ruby-identifier">activated</span>.<span class="ruby-identifier">vertex_named</span>(<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">name</span>))
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name_for</span>(<span class="ruby-identifier">dependency</span>)
    <span class="ruby-identifier">vertex</span> = <span class="ruby-identifier">activated</span>.<span class="ruby-identifier">vertex_named</span>(<span class="ruby-identifier">name</span>)
    [
      <span class="ruby-ivar">@base_dg</span>.<span class="ruby-identifier">vertex_named</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">?</span> <span class="ruby-number">0</span> <span class="ruby-operator">:</span> <span class="ruby-number">1</span>,
      <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">payload</span> <span class="ruby-operator">?</span> <span class="ruby-number">0</span> <span class="ruby-operator">:</span> <span class="ruby-number">1</span>,
      <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">root?</span> <span class="ruby-operator">?</span> <span class="ruby-number">0</span> <span class="ruby-operator">:</span> <span class="ruby-number">1</span>,
      <span class="ruby-identifier">amount_constrained</span>(<span class="ruby-identifier">dependency</span>),
      <span class="ruby-identifier">conflicts</span>[<span class="ruby-identifier">name</span>] <span class="ruby-operator">?</span> <span class="ruby-number">0</span> <span class="ruby-operator">:</span> <span class="ruby-number">1</span>,
      <span class="ruby-identifier">vertex</span>.<span class="ruby-identifier">payload</span> <span class="ruby-operator">?</span> <span class="ruby-number">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">search_for</span>(<span class="ruby-identifier">dependency</span>).<span class="ruby-identifier">count</span>,
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">platform_sort_key</span>(<span class="ruby-identifier">dependency</span>.<span class="ruby-identifier">__platform</span>),
    ]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-start">
            
              <b>start</b>(requirements)
            
            <a href="../../classes/Bundler/Resolver.html#method-i-start" name="method-i-start" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-start_source')" id="l_method-i-start_source">show</a>
                
              </p>
              <div id="method-i-start_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/resolver.rb, line 45</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">start</span>(<span class="ruby-identifier">requirements</span>)
  <span class="ruby-ivar">@gem_version_promoter</span>.<span class="ruby-identifier">prerelease_specified</span> = <span class="ruby-ivar">@prerelease_specified</span> = {}
  <span class="ruby-identifier">requirements</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">dep</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@prerelease_specified</span>[<span class="ruby-identifier">dep</span>.<span class="ruby-identifier">name</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">dep</span>.<span class="ruby-identifier">prerelease?</span> }

  <span class="ruby-identifier">verify_gemfile_dependencies_are_found!</span>(<span class="ruby-identifier">requirements</span>)
  <span class="ruby-identifier">dg</span> = <span class="ruby-ivar">@resolver</span>.<span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">requirements</span>, <span class="ruby-ivar">@base_dg</span>)
  <span class="ruby-identifier">dg</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:payload</span>).
    <span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">sg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sg</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;\0&quot;</span>) }.
    <span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:to_specs</span>).<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Molinillo</span><span class="ruby-operator">::</span><span class="ruby-constant">VersionConflict</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">message</span> = <span class="ruby-identifier">version_conflict_message</span>(<span class="ruby-identifier">e</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">VersionConflict</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">conflicts</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">uniq</span>, <span class="ruby-identifier">message</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">Molinillo</span><span class="ruby-operator">::</span><span class="ruby-constant">CircularDependencyError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">names</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:name</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;gem &#39;#{d.name}&#39;&quot;</span> }
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">CyclicDependencyError</span>, <span class="ruby-string">&quot;Your bundle requires gems that depend&quot;</span>          <span class="ruby-string">&quot; on each other, creating an infinite loop. Please remove&quot;</span>          <span class="ruby-node">&quot; #{names.count &gt; 1 ? &quot;either &quot; : &quot;&quot;}#{names.join(&quot; or &quot;)}&quot;</span>          <span class="ruby-string">&quot; and try again.&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>
