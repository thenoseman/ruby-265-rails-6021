<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Bundler::Plugin::API::Source</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../../css/github.css" type="text/css" media="screen" />
<script src="../../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            <span class="type">Module</span>
            Bundler::Plugin::API::Source
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../../files/lib/bundler/plugin/api/source_rb.html">lib/bundler/plugin/api/source.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This class provides the base to build source plugins All the method here
are required to build a source plugin (except `uri_hash`,
`gem_install_dir`; they are helpers).</p>

<p>Defaults for methods, where ever possible are provided which is expected to
work. But, all source plugins have to override `fetch_gemspec_files` and
`install`. Defaults are also not provided for `remote!`, `cache!` and
`unlock!`.</p>

<p>The defaults shall work for most situations but nevertheless they can be
(preferably should be) overridden as per the plugins&#39; needs safely (as
long as they behave as expected). On overriding `initialize` you should
call super first.</p>

<p>If required plugin should override `hash`, `==` and `eql?` methods to be
able to match objects representing same sources, but may be created in
different situation (like form gemfile and lockfile). The default ones
checks only for class and uri, but elaborate source plugins may need more
comparisons (e.g. git checking on branch or tag).</p>

<p>@!attribute [r] uri</p>

<pre><code>@return [String] the remote specified with `source` block in Gemfile</code></pre>

<p>@!attribute [r] options</p>

<pre><code>@return [String] options passed during initialization (either from
  lockfile or Gemfile)</code></pre>

<p>@!attribute [r] name</p>

<pre><code>@return [String] name that can be used to uniquely identify a source</code></pre>

<p>@!attribute [rw] <a
href="Source.html#attribute-i-dependency_names">#dependency_names</a></p>

<pre><code>@return [Array&lt;String&gt;] Names of dependencies that the source should
  try to resolve. It is not necessary to use this list intenally. This
  is present to be compatible with `Definition` and is used by
  rubygems source.</code></pre>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>#</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-3D-3D">==</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-app_cache_dirname">app_cache_dirname</a>,
              </li>
            
              
              <li>
                <a href="#method-i-app_cache_path">app_cache_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-bundler_plugin_api_source-3F">bundler_plugin_api_source?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-cache">cache</a>,
              </li>
            
              
              <li>
                <a href="#method-i-cached-21">cached!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-can_lock-3F">can_lock?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-double_check_for">double_check_for</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>E</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-eql-3F">eql?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-fetch_gemspec_files">fetch_gemspec_files</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>G</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-gem_install_dir">gem_install_dir</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-hash">hash</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-include-3F">include?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-install">install</a>,
              </li>
            
              
              <li>
                <a href="#method-i-install_path">install_path</a>,
              </li>
            
              
              <li>
                <a href="#method-i-installed-3F">installed?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>O</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-options_to_lock">options_to_lock</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-post_install">post_install</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-remote-21">remote!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-root">root</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-specs">specs</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-to_lock">to_lock</a>,
              </li>
            
              
              <li>
                <a href="#method-i-to_s">to_s</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-unlock-21">unlock!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-unmet_deps">unmet_deps</a>,
              </li>
            
              
              <li>
                <a href="#method-i-uri_hash">uri_hash</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>dependency_names</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>name</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>options</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [R]
            </td>
            <td class='attr-name'>uri</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(opts)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">opts</span>)
  <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">opts</span>
  <span class="ruby-ivar">@dependency_names</span> = []
  <span class="ruby-ivar">@uri</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-string">&quot;uri&quot;</span>]
  <span class="ruby-ivar">@type</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-string">&quot;type&quot;</span>]
  <span class="ruby-ivar">@name</span> = <span class="ruby-identifier">opts</span>[<span class="ruby-string">&quot;name&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-node">&quot;#{@type} at #{@uri}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-3D-3D">
            
              <b>==</b>(other)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-3D-3D" name="method-i-3D-3D" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>This shall check if two source object represent the same source.</p>

<p>The comparison shall take place only on the attribute that can be inferred
from the options passed from Gemfile and not on attibutes that are used to
pin down the gem to specific version (e.g. Git sources should compare on
branch and tag but not on commit hash)</p>

<p>The sources objects are constructed from Gemfile as well as from lockfile.
To converge the sources, it is necessary that they match.</p>

<p>The same applies for `eql?` and `hash`</p>
            </div>
          

          
            <div class="aka">
              Also aliased as: <a href="Source.html#method-i-eql-3F">eql?</a>
            </div>
          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-3D-3D_source')" id="l_method-i-3D-3D_source">show</a>
                
              </p>
              <div id="method-i-3D-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-keyword ruby-title">other</span>)
  <span class="ruby-identifier">other</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">uri</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">uri</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-app_cache_dirname">
            
              <b>app_cache_dirname</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-app_cache_dirname" name="method-i-app_cache_dirname" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Name of directory where plugin the is expected to cache the gems when <a
href="Source.html#method-i-cache">cache</a> is called.</p>

<p>Also this name is matched against the directories in cache for pruning</p>

<p>This is used by `app_cache_path`</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-app_cache_dirname_source')" id="l_method-i-app_cache_dirname_source">show</a>
                
              </p>
              <div id="method-i-app_cache_dirname_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 172</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">app_cache_dirname</span>
  <span class="ruby-identifier">base_name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">path</span>)
  <span class="ruby-node">&quot;#{base_name}-#{uri_hash}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-app_cache_path">
            
              <b>app_cache_path</b>(custom_path = nil)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-app_cache_path" name="method-i-app_cache_path" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>The full path where the plugin should cache the gem so that it can be
installed latter.</p>

<p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-app_cache_path_source')" id="l_method-i-app_cache_path_source">show</a>
                
              </p>
              <div id="method-i-app_cache_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">app_cache_path</span>(<span class="ruby-identifier">custom_path</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@app_cache_path</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">app_cache</span>(<span class="ruby-identifier">custom_path</span>).<span class="ruby-identifier">join</span>(<span class="ruby-identifier">app_cache_dirname</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-bundler_plugin_api_source-3F">
            
              <b>bundler_plugin_api_source?</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-bundler_plugin_api_source-3F" name="method-i-bundler_plugin_api_source-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>@private Returns true</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-bundler_plugin_api_source-3F_source')" id="l_method-i-bundler_plugin_api_source-3F_source">show</a>
                
              </p>
              <div id="method-i-bundler_plugin_api_source-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">bundler_plugin_api_source?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cache">
            
              <b>cache</b>(spec, custom_path = nil)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-cache" name="method-i-cache" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>This method is called while caching to save copy of the gems that the
source can resolve to path provided by `app_cache_app`so that they can be
reinstalled from the cache without querying the remote (i.e. an alternative
to remote)</p>

<p>This is stored with the app and source plugins should try to provide specs
and install only from this cache when `cached!` is called.</p>

<p>This cache is different from the internal caching that can be done at sub
paths of `cache_path` (from <a href="../API.html">API</a>). This can be
though as caching by bundler.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cache_source')" id="l_method-i-cache_source">show</a>
                
              </p>
              <div id="method-i-cache_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 188</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cache</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">custom_path</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">new_cache_path</span> = <span class="ruby-identifier">app_cache_path</span>(<span class="ruby-identifier">custom_path</span>)

  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">new_cache_path</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">install_path</span>, <span class="ruby-identifier">new_cache_path</span>)
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">touch</span>(<span class="ruby-identifier">app_cache_path</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;.bundlecache&quot;</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-cached-21">
            
              <b>cached!</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-cached-21" name="method-i-cached-21" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p><a href="../../../Set.html">Set</a> internal representation to fetch the
gems/specs from app cache.</p>

<p>When this is called, the source should try to fetch the specs and install
from the path provided by `app_cache_path`.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-cached-21_source')" id="l_method-i-cached-21_source">show</a>
                
              </p>
              <div id="method-i-cached-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 156</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">cached!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-can_lock-3F">
            
              <b>can_lock?</b>(spec)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-can_lock-3F" name="method-i-can_lock-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-can_lock-3F_source')" id="l_method-i-can_lock-3F_source">show</a>
                
              </p>
              <div id="method-i-can_lock-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 243</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">can_lock?</span>(<span class="ruby-identifier">spec</span>)
  <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-double_check_for">
            
              <b>double_check_for</b>(*)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-double_check_for" name="method-i-double_check_for" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>@private This <a href="../API.html">API</a> on source might not be stable,
and for now we expect plugins to download all specs in `#specs`, so we
implement the method for compatibility purposes and leave it undocumented
(and don&#39;t support) overriding it)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-double_check_for_source')" id="l_method-i-double_check_for_source">show</a>
                
              </p>
              <div id="method-i-double_check_for_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">double_check_for</span>(<span class="ruby-operator">*</span>); <span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-eql-3F">
            
              <b>eql?</b>(other)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-eql-3F" name="method-i-eql-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>When overriding `eql?` please preserve the behaviour as mentioned in
docstring for `==` method.</p>
            </div>
          

          

          
            <div class="aka">
              Alias for: <a href="Source.html#method-i-3D-3D">==</a>
            </div>
          

          
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-fetch_gemspec_files">
            
              <b>fetch_gemspec_files</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-fetch_gemspec_files" name="method-i-fetch_gemspec_files" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>This is used by the default `spec` method to constructs the Specification
objects for the gems and versions that can be installed by this source
plugin.</p>

<p>Note: If the spec method is overridden, this function is not necessary</p>

<p>@return [Array&lt;String&gt;] paths of the gemspec files for gems that can</p>

<pre><code>be installed
</code></pre>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-fetch_gemspec_files_source')" id="l_method-i-fetch_gemspec_files_source">show</a>
                
              </p>
              <div id="method-i-fetch_gemspec_files_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">fetch_gemspec_files</span>
  []
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-gem_install_dir">
            
              <b>gem_install_dir</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-gem_install_dir" name="method-i-gem_install_dir" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-gem_install_dir_source')" id="l_method-i-gem_install_dir_source">show</a>
                
              </p>
              <div id="method-i-gem_install_dir_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 278</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">gem_install_dir</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">install_path</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-hash">
            
              <b>hash</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-hash" name="method-i-hash" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>When overriding `hash` please preserve the behaviour as mentioned in
docstring for `==` method, i.e. two methods equal by above comparison
should have same hash.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-hash_source')" id="l_method-i-hash_source">show</a>
                
              </p>
              <div id="method-i-hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">hash</span>
  [<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>, <span class="ruby-identifier">uri</span>].<span class="ruby-identifier">hash</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-include-3F">
            
              <b>include?</b>(other)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-include-3F" name="method-i-include-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-include-3F_source')" id="l_method-i-include-3F_source">show</a>
                
              </p>
              <div id="method-i-include-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 269</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">include?</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-identifier">other</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-install">
            
              <b>install</b>(spec, opts)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-install" name="method-i-install" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Install the gem specified by the spec at appropriate path. `install_path`
provides a sufficient default, if the source can only satisfy one gem,  but
is not binding.</p>

<p>@return [String] post installation message (if any)</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-install_source')" id="l_method-i-install_source">show</a>
                
              </p>
              <div id="method-i-install_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">install</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">opts</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">MalformattedPlugin</span>, <span class="ruby-string">&quot;Source plugins need to override the install method.&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-install_path">
            
              <b>install_path</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-install_path" name="method-i-install_path" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>A default installation path to install a single gem. If the source servers
multiple gems, it&#39;s not of much use and the source should one of its
own.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-install_path_source')" id="l_method-i-install_path_source">show</a>
                
              </p>
              <div id="method-i-install_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 108</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">install_path</span>
  <span class="ruby-ivar">@install_path</span> <span class="ruby-operator">||=</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">base_name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>).<span class="ruby-identifier">normalize</span>.<span class="ruby-identifier">path</span>)

      <span class="ruby-identifier">gem_install_dir</span>.<span class="ruby-identifier">join</span>(<span class="ruby-node">&quot;#{base_name}-#{uri_hash[0..11]}&quot;</span>)
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-installed-3F">
            
              <b>installed?</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-installed-3F" name="method-i-installed-3F" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>A helper method, not necessary if not used internally.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-installed-3F_source')" id="l_method-i-installed-3F_source">show</a>
                
              </p>
              <div id="method-i-installed-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">installed?</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">install_path</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-options_to_lock">
            
              <b>options_to_lock</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-options_to_lock" name="method-i-options_to_lock" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Options to be saved in the lockfile so that the source plugin is able to
check out same version of gem later.</p>

<p>There options are passed when the source plugin is created from the lock
file.</p>

<p>@return [Hash]</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-options_to_lock_source')" id="l_method-i-options_to_lock_source">show</a>
                
              </p>
              <div id="method-i-options_to_lock_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 74</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">options_to_lock</span>
  {}
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-post_install">
            
              <b>post_install</b>(spec, disable_exts = false)
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-post_install" name="method-i-post_install" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>It builds extensions, generates bins and installs them for the spec
provided.</p>

<p>It depends on `spec.loaded_from` to get full_gem_path. The source plugins
should set that.</p>

<p>It should be called in `install` after the plugin is done placing the gem
at correct install location.</p>

<p>It also runs <a href="../../../Gem.html">Gem</a> hooks `pre_install`,
`post_build` and `post_install`</p>

<p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-post_install_source')" id="l_method-i-post_install_source">show</a>
                
              </p>
              <div id="method-i-post_install_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">post_install</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">disable_exts</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">opts</span> = { <span class="ruby-value">:env_shebang</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>, <span class="ruby-value">:disable_extensions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">disable_exts</span> }
  <span class="ruby-identifier">installer</span> = <span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Path</span><span class="ruby-operator">::</span><span class="ruby-constant">Installer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spec</span>, <span class="ruby-identifier">opts</span>)
  <span class="ruby-identifier">installer</span>.<span class="ruby-identifier">post_install</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-remote-21">
            
              <b>remote!</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-remote-21" name="method-i-remote-21" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p><a href="../../../Set.html">Set</a> internal representation to fetch the
gems/specs from remote.</p>

<p>When this is called, the source should try to fetch the specs and install
from remote path.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-remote-21_source')" id="l_method-i-remote-21_source">show</a>
                
              </p>
              <div id="method-i-remote-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 149</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">remote!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-root">
            
              <b>root</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-root" name="method-i-root" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>It is used to obtain the full_gem_path.</p>

<p>spec&#39;s loaded_from path is expanded against this to get full_gem_path</p>

<p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-root_source')" id="l_method-i-root_source">show</a>
                
              </p>
              <div id="method-i-root_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">root</span>
  <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">root</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-specs">
            
              <b>specs</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-specs" name="method-i-specs" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Parses the gemspec files to find the specs for the gems that can be
satisfied by the source.</p>

<p>Few important points to keep in mind:</p>

<pre><code>- If the gems are not installed then it shall return specs for all
the gems it can satisfy
- If gem is installed (that is to be detected by the plugin itself)
then it shall return at least the specs that are installed.
- The `loaded_from` for each of the specs shall be correct (it is
used to find the load path)</code></pre>

<p>@return [Bundler::Index] index containing the specs</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-specs_source')" id="l_method-i-specs_source">show</a>
                
              </p>
              <div id="method-i-specs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">specs</span>
  <span class="ruby-identifier">files</span> = <span class="ruby-identifier">fetch_gemspec_files</span>

  <span class="ruby-constant">Bundler</span><span class="ruby-operator">::</span><span class="ruby-constant">Index</span>.<span class="ruby-identifier">build</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">spec</span> = <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">load_gemspec</span>(<span class="ruby-identifier">file</span>)
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">set_installed_by_version</span>(<span class="ruby-identifier">spec</span>)

      <span class="ruby-identifier">spec</span>.<span class="ruby-identifier">source</span> = <span class="ruby-keyword">self</span>
      <span class="ruby-constant">Bundler</span>.<span class="ruby-identifier">rubygems</span>.<span class="ruby-identifier">validate</span>(<span class="ruby-identifier">spec</span>)

      <span class="ruby-identifier">index</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">spec</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_lock">
            
              <b>to_lock</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-to_lock" name="method-i-to_lock" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Generates the content to be entered into the lockfile. Saves type and
remote and also calls to `options_to_lock`.</p>

<p><a href="../../Plugin.html">Plugin</a> should use `options_to_lock` to save
information in lockfile and not override this.</p>

<p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_lock_source')" id="l_method-i-to_lock_source">show</a>
                
              </p>
              <div id="method-i-to_lock_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 254</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_lock</span>
  <span class="ruby-identifier">out</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{LockfileParser::PLUGIN}\n&quot;</span>)
  <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  remote: #{@uri}\n&quot;</span>
  <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  type: #{@type}\n&quot;</span>
  <span class="ruby-identifier">options_to_lock</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">opt</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;  #{opt}: #{value}\n&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;  specs:\n&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-to_s">
            
              <b>to_s</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-to_s" name="method-i-to_s" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-to_s_source')" id="l_method-i-to_s_source">show</a>
                
              </p>
              <div id="method-i-to_s_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 264</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">to_s</span>
  <span class="ruby-node">&quot;plugin source for #{options[:type]} with uri #{uri}&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-unlock-21">
            
              <b>unlock!</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-unlock-21" name="method-i-unlock-21" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>This is called to update the spec and installation.</p>

<p>If the source plugin is loaded from lockfile or otherwise, it shall refresh
the cache/specs (e.g. git sources can make a fresh clone).</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unlock-21_source')" id="l_method-i-unlock-21_source">show</a>
                
              </p>
              <div id="method-i-unlock-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">unlock!</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-unmet_deps">
            
              <b>unmet_deps</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-unmet_deps" name="method-i-unmet_deps" class="permalink">Link</a>
          </div>

          
            <div class="description">
              <p>Used by definition.</p>

<p>Note: Do not override if you don&#39;t know what you are doing.</p>
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-unmet_deps_source')" id="l_method-i-unmet_deps_source">show</a>
                
              </p>
              <div id="method-i-unmet_deps_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 238</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">unmet_deps</span>
  <span class="ruby-identifier">specs</span>.<span class="ruby-identifier">unmet_dependency_names</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-uri_hash">
            
              <b>uri_hash</b>()
            
            <a href="../../../../classes/Bundler/Plugin/API/Source.html#method-i-uri_hash" name="method-i-uri_hash" class="permalink">Link</a>
          </div>

          
            <div class="description">
              
            </div>
          

          

          

          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source:
                <a href="javascript:toggleSource('method-i-uri_hash_source')" id="l_method-i-uri_hash_source">show</a>
                
              </p>
              <div id="method-i-uri_hash_source" class="dyn-source">
                <pre><span class="ruby-comment"># File lib/bundler/plugin/api/source.rb, line 273</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">uri_hash</span>
  <span class="ruby-constant">SharedHelpers</span>.<span class="ruby-identifier">digest</span>(<span class="ruby-value">:SHA1</span>).<span class="ruby-identifier">hexdigest</span>(<span class="ruby-identifier">uri</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>
