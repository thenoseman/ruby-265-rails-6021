<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>NEWS</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../css/github.css" type="text/css" media="screen" />
<script src="../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            NEWS
        </h1>
        <ul class="files">
            
            <li>
                NEWS
                
            </li>
            <li>Last modified: 2019-10-01 13:01:01 +0200</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="label-NEWS+for+Ruby+2.6.0"><a href="NEWS.html">NEWS</a> for Ruby 2.6.0</h1>

<p>This document is a list of user visible feature changes made between
releases except for bug fixes.</p>

<p>Note that each entry is kept so brief that no reason behind or reference
information is supplied with.  For a full list of changes with all
sufficient information, see the ChangeLog file or Redmine (e.g.
<code>https://bugs.ruby-lang.org/issues/$FEATURE_OR_BUG_NUMBER</code>)</p>

<h2 id="label-Changes+since+the+2.5.0+release">Changes since the 2.5.0 release</h2>

<h3 id="label-Language+changes">Language changes</h3>
<ul><li>
<p><code>$SAFE</code> now is a process global state and can be set to 0 again.
[Feature #14250]</p>
</li><li>
<p>Refinements take place at block passing.  [Feature #14223]</p>
</li><li>
<p>Refinements take place at Kernel#public_send.  [Feature #15326]</p>
</li><li>
<p>Refinements take place at Kernel#respond_to?.  [Feature #15327]</p>
</li><li>
<p><code>else</code> without <code>rescue</code> now causes a syntax error. 
[EXPERIMENTAL] [Feature #14606]</p>
</li><li>
<p>Constant names may start with a non-ASCII capital letter. [Feature #13770]</p>
</li><li>
<p>Endless ranges are introduced.  You can use a <a
href="../classes/Range.html">Range</a> that has no end, like
<code>(0..)</code> (or similarly <code>(0...)</code>).  [Feature #12912]</p>

<p>The following shows typical use cases:</p>

<pre><code>ary[1..]                              # identical to ary[1..-1]
(1...).each {|index| block }          # infinite loop from index 1
ary.zip(1..) {|elem, index| block }   # ary.each.with_index(1) { }
</code></pre>
</li><li>
<p>The “shadowing outer local variable” warning is removed.  [Feature #12490]</p>

<p>You can now write the following without warning:</p>

<pre><code>user = users.find {|user| cond(user) }
</code></pre>
</li><li>
<p>Print <code>cause</code> of the exception if the exception is not caught
and printed its backtraces and error message. [Feature #8257]</p>
</li><li>
<p>The flip-flop syntax is deprecated. [Feature #5400]</p>
</li><li>
<p>Non-Symbol keys in a keyword arguments hash was prohibited at 2.6.0, but
now allowed again.  [Bug #15658]</p>
</li></ul>

<h3 id="label-Core+classes+updates+-28outstanding+ones+only-29">Core classes updates (outstanding ones only)</h3>
<dl class="rdoc-list label-list"><dt><a href="../classes/Array.html">Array</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Array.html#method-i-union">Array#union</a> and <a
href="../classes/Array.html#method-i-difference">Array#difference</a>
instance methods.  [Feature #14097]</p>
</li></ul>
</dd><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/Array.html#method-i-to_h">Array#to_h</a> now accepts a
block that maps elements to new key/value pairs.  [Feature #15143]</p>
</li></ul>
</dd><dt>Aliased methods
<dd><ul><li>
<p><a href="../classes/Array.html#method-i-filter">Array#filter</a> is a new
alias for <a href="../classes/Array.html#method-i-select">Array#select</a>.
[Feature #13784]</p>
</li><li>
<p><a href="../classes/Array.html#method-i-filter-21">Array#filter!</a> is a
new alias for <a
href="../classes/Array.html#method-i-select-21">Array#select!</a>. [Feature
#13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Binding.html">Binding</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a
href="../classes/Binding.html#method-i-source_location">Binding#source_location</a>.
[Feature #14230]</p>

<p>This method returns the source location of the binding, a 2-element array
of <code>__FILE__</code> and <code>__LINE__</code>. Traditionally, the same
information could be retrieved by <code>eval(&quot;[__FILE__,
__LINE__]&quot;, binding)</code>, but we are planning to change this
behavior so that <a
href="../classes/Kernel.html#method-i-eval">Kernel#eval</a> ignores
binding&#39;s source location [Bug #4352].  So, users should use this
newly-introduced method instead of <a
href="../classes/Kernel.html#method-i-eval">Kernel#eval</a>.</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Dir.html">Dir</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Dir.html#method-i-each_child">Dir#each_child</a>
and <a href="../classes/Dir.html#method-i-children">Dir#children</a>
instance methods. [Feature #13969]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Enumerable.html">Enumerable</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p><a href="../classes/Enumerable.html#method-i-chain">Enumerable#chain</a>
returns an enumerator object that iterates over the elements of the
receiver and then those of each argument in sequence.  [Feature #15144]</p>
</li></ul>
</dd><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/Enumerable.html#method-i-to_h">Enumerable#to_h</a> now
accepts a block that maps elements to new key/value pairs.  [Feature
#15143]</p>
</li></ul>
</dd><dt>Aliased methods
<dd><ul><li>
<p><a href="../classes/Enumerable.html#method-i-filter">Enumerable#filter</a>
is a new alias for <a
href="../classes/Enumerable.html#method-i-select">Enumerable#select</a>.
[Feature #13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Enumerator/ArithmeticSequence.html">Enumerator::ArithmeticSequence</a>
<dd><ul><li>
<p>This is a new class to represent a generator of an arithmetic sequence,
that is a number sequence defined by a common difference. It can be used
for representing what is similar to Python&#39;s slice. You can get an
instance of this class from <a
href="../classes/Numeric.html#method-i-step">Numeric#step</a> and <a
href="../classes/Range.html#method-i-step">Range#step</a>.</p>
</li></ul>
</dd><dt><a href="../classes/Enumerator/Chain.html">Enumerator::Chain</a>
<dd><ul><li>
<p>This is a new class to represent a chain of enumerables that works as a
single enumerator, generated by such methods as <a
href="../classes/Enumerable.html#method-i-chain">Enumerable#chain</a> and
Enumerator#+.</p>
</li></ul>
</dd><dt><a href="../classes/Enumerator/Lazy.html">Enumerator::Lazy</a>
<dd><dl class="rdoc-list label-list"><dt>Aliased methods
<dd><ul><li>
<p><a
href="../classes/Enumerator/Lazy.html#method-i-filter">Enumerator::Lazy#filter</a>
is a new alias for <a
href="../classes/Enumerator/Lazy.html#method-i-select">Enumerator::Lazy#select</a>.
[Feature #13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Enumerator.html">Enumerator</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Enumerator#+ returns an enumerator object that iterates over the elements
of the receiver and then those of the other operand.  [Feature #15144]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/ENV.html">ENV</a>
<dd><dl class="rdoc-list label-list"><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/ENV.html#method-c-to_h">ENV.to_h</a> now accepts a
block that maps names and values to new keys and values.  [Feature #15143]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Exception.html">Exception</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p><a
href="../classes/Exception.html#method-i-full_message">Exception#full_message</a>
takes <code>:highlight</code> and <code>:order</code> options. [Bug #14324]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Hash.html">Hash</a>
<dd><dl class="rdoc-list label-list"><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/Hash.html#method-i-merge">Hash#merge</a>, <a
href="../classes/Hash.html#method-i-merge-21">Hash#merge!</a>, and <a
href="../classes/Hash.html#method-i-update">Hash#update</a> now accept
multiple arguments.  [Feature #15111]</p>
</li><li>
<p><a href="../classes/Hash.html#method-i-to_h">Hash#to_h</a> now accepts a
block that maps keys and values to new keys and values.  [Feature #15143]</p>
</li></ul>
</dd><dt>Aliased methods
<dd><ul><li>
<p><a href="../classes/Hash.html#method-i-filter">Hash#filter</a> is a new
alias for <a href="../classes/Hash.html#method-i-select">Hash#select</a>. 
[Feature #13784]</p>
</li><li>
<p><a href="../classes/Hash.html#method-i-filter-21">Hash#filter!</a> is a new
alias for <a
href="../classes/Hash.html#method-i-select-21">Hash#select!</a>. [Feature
#13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/IO.html">IO</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p>Added new mode character <code>&#39;x&#39;</code> to open files for
exclusive access. [Feature #11258]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Kernel.html">Kernel</a>
<dd><dl class="rdoc-list label-list"><dt>Aliased methods
<dd><ul><li>
<p>Kernel#then is a new alias for Kernel#yield_self. [Feature #14594]</p>
</li></ul>
</dd><dt>New options
<dd><ul><li>
<p>Kernel#Complex, Kernel#Float, Kernel#Integer, and Kernel#Rational take an
<code>:exception</code> option to specify the way of error handling. 
[Feature #12732]</p>
</li><li>
<p><a href="../classes/Kernel.html#method-i-system">Kernel#system</a> takes an
<code>:exception</code> option to raise an exception on failure.  [Feature
#14386]</p>
</li></ul>
</dd><dt>Incompatible changes
<dd><ul><li>
<p><a href="../classes/Kernel.html#method-i-system">Kernel#system</a> and <a
href="../classes/Kernel.html#method-i-exec">Kernel#exec</a> do not close
non-standard file descriptors (the default of the
<code>:close_others</code> option is changed to <code>false</code>, but we
still set the <code>FD_CLOEXEC</code> flag on descriptors we create). 
[Misc #14907]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/KeyError.html">KeyError</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p><a href="../classes/KeyError.html#method-c-new">KeyError.new</a> accepts
<code>:receiver</code> and <code>:key</code> options to set receiver and
key in Ruby code.  [Feature #14313]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Method.html">Method</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Method.html#method-i-3C-3C">Method#<<</a> and <a
href="../classes/Method.html#method-i-3E-3E">Method#>></a> for <a
href="../classes/Proc.html">Proc</a> composition.  [Feature #6284]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Module.html">Module</a>
<dd><dl class="rdoc-list label-list"><dt>Modified methods
<dd><ul><li>
<p><a
href="../classes/Module.html#method-i-method_defined-3F">Module#method_defined?</a>,
<a
href="../classes/Module.html#method-i-private_method_defined-3F">Module#private_method_defined?</a>,
and <a
href="../classes/Module.html#method-i-protected_method_defined-3F">Module#protected_method_defined?</a>
now accept the second parameter as optional. If it is <code>true</code>
(the default value), it checks ancestor modules/classes, or checks only the
class itself. [Feature #14944]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/NameError.html">NameError</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p><a href="../classes/NameError.html#method-c-new">NameError.new</a> accepts
a <code>:receiver</code> option to set receiver in Ruby code.  [Feature
#14313]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/NilClass.html">NilClass</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>NilClass#=~ is added for compatibility.  [Feature #15231]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/NoMethodError.html">NoMethodError</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p><a href="../classes/NoMethodError.html#method-c-new">NoMethodError.new</a>
accepts a <code>:receiver</code> option to set receiver in Ruby code. 
[Feature #14313]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Numeric.html">Numeric</a>
<dd><dl class="rdoc-list label-list"><dt>Incompatible changes
<dd><ul><li>
<p><a href="../classes/Numeric.html#method-i-step">Numeric#step</a> now
returns an instance of the <a
href="../classes/Enumerator/ArithmeticSequence.html">Enumerator::ArithmeticSequence</a>
class rather than one of the <a
href="../classes/Enumerator.html">Enumerator</a> class.</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/OpenStruct.html">OpenStruct</a>
<dd><dl class="rdoc-list label-list"><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/OpenStruct.html#method-i-to_h">OpenStruct#to_h</a> now
accepts a block that maps keys and values to new keys and values.  [Feature
#15143]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Proc.html">Proc</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Proc.html#method-i-3C-3C">Proc#<<</a> and <a
href="../classes/Proc.html#method-i-3E-3E">Proc#>></a> for <a
href="../classes/Proc.html">Proc</a> composition.  [Feature #6284]</p>
</li></ul>
</dd><dt>Incompatible changes
<dd><ul><li>
<p><a href="../classes/Proc.html#method-i-call">Proc#call</a> doesn&#39;t
change <code>$SAFE</code> any more.  [Feature #14250]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Random.html">Random</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Random.html#method-i-bytes">Random#bytes</a>. 
[Feature #4938]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Range.html">Range</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Added <a href="../classes/Range.html#method-i-25">Range#%</a> instance
method.  [Feature #14697]</p>
</li></ul>
</dd><dt>Incompatible changes
<dd><ul><li>
<p><a href="../classes/Range.html#method-i-3D-3D-3D">Range#===</a> now uses
the <code>#cover?</code> instead of the <code>#include?</code> method.
[Feature #14575]</p>
</li><li>
<p><a href="../classes/Range.html#method-i-cover-3F">Range#cover?</a> now
accepts a <a href="../classes/Range.html">Range</a> object. [Feature
#14473]</p>
</li><li>
<p><a href="../classes/Range.html#method-i-step">Range#step</a> now returns an
instance of the <a
href="../classes/Enumerator/ArithmeticSequence.html">Enumerator::ArithmeticSequence</a>
class rather than one of the <a
href="../classes/Enumerator.html">Enumerator</a> class.</p>
</li></ul>
</dd></dl>
</dd><dt>Regexp/String
<dd><ul><li>
<p>Update Unicode version to 12.1.0, adding support for U+32FF SQUARE ERA NAME
REIWA [Feature #15195]</p>
</li><li>
<p>Update Unicode version and Emoji version from 11.0.0 to 12.0.0. [Feature
#15321]</p>
</li><li>
<p>Update Unicode version from 10.0.0 to 11.0.0. [Feature #14802]</p>

<p>This includes a rewrite of the grapheme cluster (/X/) algorithm and
special-casing for Georgian MTAVRULI on <a
href="../classes/String.html#method-i-downcase">String#downcase</a>.</p>
</li><li>
<p>Update Emoji version from 5.0 to 11.0.0 [Feature #14802]</p>
</li></ul>
</dd><dt><a href="../classes/RubyVM/AbstractSyntaxTree.html">RubyVM::AbstractSyntaxTree</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p><a
href="../classes/RubyVM/AbstractSyntaxTree.html#method-c-parse">RubyVM::AbstractSyntaxTree.parse</a>
parses a given string and returns AST nodes. [experimental]</p>
</li><li>
<p><a
href="../classes/RubyVM/AbstractSyntaxTree.html#method-c-parse_file">RubyVM::AbstractSyntaxTree.parse_file</a>
parses a given file and returns AST nodes.  [experimental]</p>
</li><li>
<p><a
href="../classes/RubyVM/AbstractSyntaxTree.html#method-c-of">RubyVM::AbstractSyntaxTree.of</a>
returns AST nodes of the given proc or method.</p>
<dl class="rdoc-list label-list"><dt>experimental
<dd></dd></dl>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/RubyVM.html">RubyVM</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>RubyVM.resolve_feature_path identifies the file that will be loaded by
“require(feature)”. [experimental] [Feature #15230]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/String.html">String</a>
<dd><ul><li>
<p><a href="../classes/String.html#method-i-crypt">String#crypt</a> is now
deprecated. [Feature #14915]</p>
</li></ul>
<dl class="rdoc-list label-list"><dt>New features
<dd><ul><li>
<p><a href="../classes/String.html#method-i-split">String#split</a> yields
each substring to the block if given. [Feature #4780]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Struct.html">Struct</a>
<dd><dl class="rdoc-list label-list"><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/Struct.html#method-i-to_h">Struct#to_h</a> now accepts
a block that maps keys and values to new keys and values.  [Feature #15143]</p>
</li></ul>
</dd><dt>Aliased method
<dd><ul><li>
<p><a href="../classes/Struct.html#method-i-filter">Struct#filter</a> is a new
alias for <a
href="../classes/Struct.html#method-i-select">Struct#select</a>. [Feature
#13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Time.html">Time</a>
<dd><dl class="rdoc-list label-list"><dt>New features
<dd><ul><li>
<p><a href="../classes/Time.html#method-c-new">Time.new</a> and <a
href="../classes/Time.html#method-i-getlocal">Time#getlocal</a> accept a
timezone object as well as a UTC offset string. Time#+, Time#-, and <a
href="../classes/Time.html#method-i-succ">Time#succ</a> also preserve the
timezone.  [Feature #14850]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/TracePoint.html">TracePoint</a>
<dd><dl class="rdoc-list label-list"><dt>New features
<dd><ul><li>
<p>“script_compiled” event is supported. [Feature #15287]</p>
</li></ul>
</dd><dt>New methods
<dd><ul><li>
<p><a
href="../classes/TracePoint.html#method-i-parameters">TracePoint#parameters</a>
[Feature #14694]</p>
</li><li>
<p><a
href="../classes/TracePoint.html#method-i-instruction_sequence">TracePoint#instruction_sequence</a>
[Feature #15287]</p>
</li><li>
<p><a
href="../classes/TracePoint.html#method-i-eval_script">TracePoint#eval_script</a>
[Feature #15287]</p>
</li></ul>
</dd><dt>Modified methods
<dd><ul><li>
<p><a href="../classes/TracePoint.html#method-i-enable">TracePoint#enable</a>
accepts new keywords “target:” and “target_line:”.</p>
<dl class="rdoc-list label-list"><dt>Feature #15289
<dd></dd></dl>
</li></ul>
</dd></dl>
</dd></dl>

<h3 id="label-Stdlib+updates+-28outstanding+ones+only-29">Stdlib updates (outstanding ones only)</h3>
<dl class="rdoc-list label-list"><dt><a href="../classes/BigDecimal.html">BigDecimal</a>
<dd>
<p>Update to version 1.4.0.  This version includes several compatibility
issues, see Compatibility issues section below for details.</p>
<dl class="rdoc-list label-list"><dt>Modified methods
<dd></dd></dl>
<ul><li>
<p>BigDecimal() accepts the new keyword “exception:” similar to Float().</p>
</li></ul>
<dl class="rdoc-list label-list"><dt>Note for the differences among recent versions
<dd>
<p>You should want to know the differences among recent versions of
bigdecimal. Please select the suitable version of bigdecimal according to
the following information.</p>
<ul><li>
<p>1.3.5 has <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a> without
“exception:” keyword.  You can see the deprecation warning of <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a> when you
specify “-w” option. BigDecimal(), <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a>, and
Object#to_d methods are the same.</p>
</li><li>
<p>1.4.0 has <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a> with
“exception:” keyword.  You always see the deprecation warning of <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a>. 
Object#to_d method is different from BigDecimal() and <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a>.</p>
</li><li>
<p>2.0.0 will be released soon after releasing Ruby 2.6.0.  This version will
not have the <a
href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a> method.</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Bundler.html">Bundler</a>
<dd><ul><li>
<p>Add <a href="../classes/Bundler.html">Bundler</a> to Standard Library.
[Feature #12733]</p>
</li><li>
<p>Use 1.17.2, the latest stable version.</p>
</li></ul>
</dd><dt><a href="../classes/Coverage.html">Coverage</a>
<dd>
<p>A oneshot_lines mode is added.  [Feature #15022]</p>

<p>This mode checks “whether each line was executed at least once or not”,
instead of “how many times each line was executed”. A hook for each line is
fired at most once, and after it is fired the hook flag is removed, i.e.,
it runs with zero overhead.</p>
<dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p>Add <code>:oneshot_lines</code> keyword argument to <a
href="../classes/Coverage.html#method-c-start">Coverage.start</a>.</p>
</li><li>
<p>Add <code>:stop</code> and <code>:clear</code> keyword arguments to <a
href="../classes/Coverage.html#method-c-result">Coverage.result</a>. If
<code>clear</code> is true, it clears the counters to zero. If
<code>stop</code> is true, it disables coverage measurement.</p>
</li></ul>
</dd><dt>New methods
<dd><ul><li>
<p>Coverage.line_stub, which is a simple helper function that creates the
“stub” of line coverage from a given source code.</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/CSV.html">CSV</a>
<dd><ul><li>
<p>Upgrade to 3.0.2. This includes performance improvements especially for
writing. Writing is about 2 times faster. See <a
href="https://github.com/ruby/csv/blob/master/NEWS.md">github.com/ruby/csv/blob/master/NEWS.md</a>.</p>
</li></ul>
</dd><dt><a href="../classes/ERB.html">ERB</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p>Add <code>:trim_mode</code> and <code>:eoutvar</code> keyword arguments to
<a href="../classes/ERB.html#method-c-new">ERB.new</a>. Now non-keyword
arguments other than the first one are softly deprecated and will be
removed when Ruby 2.5 becomes EOL. [Feature #14256]</p>
</li><li>
<p>erb command&#39;s <code>-S</code> option is deprecated, and will be removed
in the next version.</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/FileUtils.html">FileUtils</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>FileUtils#cp_lr.  [Feature #4189]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Matrix.html">Matrix</a>
<dd><dl class="rdoc-list label-list"><dt>New methods
<dd><ul><li>
<p>Matrix#antisymmetric?, Matrix#skew_symmetric?</p>
</li><li>
<p>Matrix#map!, Matrix#collect! [Feature #14151]</p>
</li><li>
<p><a href="../classes/Object.html#method-i-5B-5D-3D">Object#[]=</a></p>
</li><li>
<p>Vector#map!, Vector#collect!</p>
</li><li>
<p>Vector#[]=</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/Net.html">Net</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p>Add <code>:write_timeout</code> keyword argument to <a
href="../classes/Net/HTTP.html#method-c-new">Net::HTTP.new</a>. [Feature
#13396]</p>
</li></ul>
</dd><dt>New methods
<dd><ul><li>
<p>Add <a
href="../classes/Net/HTTP.html#attribute-i-write_timeout">Net::HTTP#write_timeout</a>
and <a
href="../classes/Net/HTTP.html#method-i-write_timeout-3D">Net::HTTP#write_timeout=</a>.
[Feature #13396]</p>
</li></ul>
</dd><dt>New constant
<dd><ul><li>
<p>Add <a
href="../classes/HTTPClientException.html">Net::HTTPClientException</a> to
deprecate <a
href="../classes/Net/HTTPServerException.html">Net::HTTPServerException</a>,
whose name is misleading.  [Bug #14688]</p>
</li></ul>
</dd><dt><a href="../classes/Net/IMAP.html">Net::IMAP</a>
<dd><ul><li>
<p>Add Server Name Indication (SNI) support.  [Feature #15594]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/NKF.html">NKF</a>
<dd><ul><li>
<p>Upgrade to nkf v2.1.5</p>
</li></ul>
</dd><dt><a href="../classes/Psych.html">Psych</a>
<dd><ul><li>
<p>Upgrade to <a href="../classes/Psych.html">Psych</a> 3.1.0</p>
</li></ul>
</dd><dt><a href="../classes/RDoc.html">RDoc</a>
<dd><ul><li>
<p>Become about 2 times faster.</p>
</li><li>
<p>Use SOURCE_DATE_EPOCH to generate files.</p>
</li><li>
<p>Fix method line number that slipped off.</p>
</li><li>
<p>Enable <code>--width</code>, <code>--exclude</code>, and
<code>--line-numbers</code> that were ignored.</p>
</li><li>
<p>Add support for blockquote by “&gt;&gt;&gt;” in default markup notation.</p>
</li><li>
<p>Add support for “Raises” lines in TomDoc notation.</p>
</li><li>
<p>Fix syntax error output.</p>
</li><li>
<p>Fix many parsing bugs.</p>
</li></ul>
</dd><dt><a href="../classes/REXML.html">REXML</a>
<dd><ul><li>
<p>Upgrade to <a href="../classes/REXML.html">REXML</a> 3.1.9. See <a
href="https://github.com/ruby/rexml/blob/master/NEWS.md">github.com/ruby/rexml/blob/master/NEWS.md</a>.</p>
</li></ul>
<dl class="rdoc-list label-list"><dt>Improved some XPath implementations
<dd><ul><li>
<p><code>concat()</code> function: Stringify all arguments before
concatenating.</p>
</li><li>
<p><code>string()</code> function: Support context node.</p>
</li><li>
<p><code>string()</code> function: Support processing instruction node.</p>
</li><li>
<p>Support <code>&quot;*:#{ELEMENT_NAME}&quot;</code> syntax in XPath 2.0.</p>
</li></ul>
</dd><dt>Fixed some XPath implementations
<dd><ul><li>
<p><code>&quot;//#{ELEMENT_NAME}[#{POSITION}]&quot;</code> case</p>
</li><li>
<p><code>string()</code> function: Fix <code>function(document)</code> returns
nodes that are out of root elements.</p>
</li><li>
<p><code>&quot;/ #{ELEMENT_NAME} &quot;</code> case</p>
</li><li>
<p><code>&quot;/ #{ELEMENT_NAME} [ #{PREDICATE} ]&quot;</code> case</p>
</li><li>
<p><code>&quot;/ #{AXIS}::#{ELEMENT_NAME}&quot;</code> case</p>
</li><li>
<p><code>&quot;#{N}-#{M}&quot;</code> case: One or more white spaces were
required before <code>&quot;-&quot;</code></p>
</li><li>
<p><code>&quot;/child::node()&quot;</code> case</p>
</li><li>
<p><code>&quot;#{FUNCTION}()/#{PATH}&quot;</code> case</p>
</li><li>
<p><code>&quot;@#{ATTRIBUTE}/parent::&quot;</code> case</p>
</li><li>
<p><code>&quot;name(#{NODE_SET})&quot;</code> case</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/CSV.html">CSV</a>
<dd><ul><li>
<p>Upgrade to 3.0.9. See <a
href="https://github.com/ruby/csv/blob/master/NEWS.md">github.com/ruby/csv/blob/master/NEWS.md</a>.</p>
</li></ul>
</dd><dt><a href="../classes/Date.html">Date</a>
<dd><ul><li>
<p><a href="../classes/Date.html#method-c-jisx0301">Date.jisx0301</a>, <a
href="../classes/Date.html#method-i-jisx0301">Date#jisx0301</a>, and <a
href="../classes/Date.html#method-c-parse">Date.parse</a> provisionally
support the new Japanese era as an informal extension, until the new JIS X
0301 is issued.  [Feature #15742]</p>
</li></ul>
</dd><dt><a href="../classes/RSS.html">RSS</a>
<dd><dl class="rdoc-list label-list"><dt>New options
<dd><ul><li>
<p><a href="../classes/RSS/Parser.html#method-c-parse">RSS::Parser.parse</a>
now accepts options as <a href="../classes/Hash.html">Hash</a>.
<code>:validate</code> , <code>:ignore_unknown_element</code> ,
<code>:parser_class</code> options are available.</p>
</li></ul>
</dd></dl>
</dd><dt>RubyGems
<dd><ul><li>
<p>Upgrade to RubyGems 3.0.1</p>
</li><li>
<p><a
href="https://blog.rubygems.org/2018/12/19/3.0.0-released.html">blog.rubygems.org/2018/12/19/3.0.0-released.html</a></p>
</li><li>
<p><a
href="https://blog.rubygems.org/2018/12/23/3.0.1-released.html">blog.rubygems.org/2018/12/23/3.0.1-released.html</a></p>
</li></ul>
</dd><dt><a href="../classes/Set.html">Set</a>
<dd><dl class="rdoc-list label-list"><dt>Aliased methods
<dd><ul><li>
<p><a href="../classes/Set.html#method-i-filter-21">Set#filter!</a> is a new
alias for <a href="../classes/Set.html#method-i-select-21">Set#select!</a>.
[Feature #13784]</p>
</li></ul>
</dd></dl>
</dd><dt><a href="../classes/URI.html">URI</a>
<dd><dl class="rdoc-list label-list"><dt>New constant
<dd><ul><li>
<p>Add <a href="../classes/URI/File.html">URI::File</a> to handle the file <a
href="../classes/URI.html">URI</a> scheme.  [Feature #14035]</p>
</li></ul>
</dd></dl>
</dd></dl>

<h3 id="label-Compatibility+issues+-28excluding+feature+bug+fixes-29">Compatibility issues (excluding feature bug fixes)</h3>
<dl class="rdoc-list label-list"><dt><a href="../classes/Dir.html">Dir</a>
<dd><ul><li>
<p><a href="../classes/Dir.html#method-c-glob">Dir.glob</a> with
<code>&#39;\0&#39;</code>-separated pattern list will be deprecated, and is
now warned.  [Feature #14643]</p>
</li></ul>
</dd><dt><a href="../classes/File.html">File</a>
<dd><ul><li>
<p><a href="../classes/IO.html#method-c-read">IO.read</a>, <a
href="../classes/IO.html#method-c-binread">IO.binread</a>, <a
href="../classes/IO.html#method-c-write">IO.write</a>, <a
href="../classes/IO.html#method-c-binwrite">IO.binwrite</a>, <a
href="../classes/IO.html#method-c-foreach">IO.foreach</a>, and <a
href="../classes/IO.html#method-c-readlines">IO.readlines</a> do not invoke
external commands even if the path starts with the pipe character
<code>&#39;|&#39;</code>. [Feature #14245]</p>
</li></ul>
</dd><dt><a href="../classes/Object.html">Object</a>
<dd><ul><li>
<p>Object#=~ is deprecated.  [Feature #15231]</p>
</li></ul>
</dd></dl>

<h3 id="label-Stdlib+compatibility+issues+-28excluding+feature+bug+fixes-29">Stdlib compatibility issues (excluding feature bug fixes)</h3>
<ul><li>
<p>These standard libraries have been promoted to default gems.</p>
<ul><li>
<p>e2mmap</p>
</li><li>
<p>forwardable</p>
</li><li>
<p>irb</p>
</li><li>
<p>logger</p>
</li><li>
<p>matrix</p>
</li><li>
<p>mutex_m</p>
</li><li>
<p>ostruct</p>
</li><li>
<p>prime</p>
</li><li>
<p>rexml</p>
</li><li>
<p>rss</p>
</li><li>
<p>shell</p>
</li><li>
<p>sync</p>
</li><li>
<p>thwait</p>
</li><li>
<p>tracer</p>
</li></ul>
</li></ul>
<dl class="rdoc-list label-list"><dt><a href="../classes/BigDecimal.html">BigDecimal</a>
<dd><ul><li>
<p>The following methods are removed.</p>
<ul><li>
<p>BigDecimal.allocate</p>
</li><li>
<p>BigDecimal.ver</p>
</li></ul>
</li><li>
<p>Every <a href="../classes/BigDecimal.html">BigDecimal</a> object is frozen.
[Feature #13984]</p>
</li><li>
<p>BigDecimal() parses the given string similar to Float().</p>
</li><li>
<p>String#to_d parses the receiver string similar to <a
href="../classes/String.html#method-i-to_f">String#to_f</a>.</p>
</li><li>
<p><a href="../classes/BigDecimal.html#method-c-new">BigDecimal.new</a> will
be removed in version 2.0.</p>
</li></ul>
</dd><dt><a href="../classes/Pathname.html">Pathname</a>
<dd><ul><li>
<p><a href="../classes/Pathname.html#method-i-read">Pathname#read</a>, <a
href="../classes/Pathname.html#method-i-binread">Pathname#binread</a>, <a
href="../classes/Pathname.html#method-i-write">Pathname#write</a>, <a
href="../classes/Pathname.html#method-i-binwrite">Pathname#binwrite</a>, <a
href="../classes/Pathname.html#method-i-each_line">Pathname#each_line</a>
and <a
href="../classes/Pathname.html#method-i-readlines">Pathname#readlines</a>
do not invoke external commands even if the path starts with the pipe
character <code>&#39;|&#39;</code>. This follows [Feature #14245].</p>
</li></ul>
</dd></dl>

<h3 id="label-C+API+updates">C API updates</h3>

<h3 id="label-Implementation+improvements">Implementation improvements</h3>
<ul><li>
<p>Speedup <a href="../classes/Proc.html#method-i-call">Proc#call</a> because
we don&#39;t need to care about <code>$SAFE</code> any more. [Feature
#14318]</p>

<p>With <code>lc_fizzbuzz</code> benchmark which uses <a
href="../classes/Proc.html#method-i-call">Proc#call</a> many times we can
measure x1.4 improvements.  [Bug #10212]</p>
</li><li>
<p>Speedup block.call where <code>block</code> is passed block parameter.
[Feature #14330]</p>

<p>Ruby 2.5 improves block passing performance. [Feature #14045]</p>

<p>Additionally, Ruby 2.6 improves the performance of passed block calling.</p>
</li><li>
<p>Introduce an initial implementation of a JIT (Just-in-time) compiler.
[Feature #14235] [experimental]</p>
<ul><li>
<p><code>--jit</code> command line option is added to enable JIT.
<code>--jit-verbose=1</code> is good for inspection.  See <code>ruby
--help</code> for others.</p>
</li><li>
<p>To generate machine code, this JIT compiler uses the C compiler used for
building the interpreter. Currently GCC, Clang, and Microsoft Visual C++
are supported for it.</p>
</li><li>
<p><code>--disable-mjit-support</code> option is added to configure. This is
added for JIT debugging, but if you get an error on building a header file
for JIT, you can use this option to skip building it as a workaround.</p>
</li><li>
<p>rb_waitpid reimplemented on Unix-like platforms to maintain compatibility
with processes created for JIT [Bug #14867]</p>
</li></ul>
</li><li>
<p>VM generator script renewal; makes the generated VM more optimized.
[GH-1779]</p>
</li><li>
<p><a href="../classes/Thread.html">Thread</a> cache enabled for pthreads
platforms (for <a href="../classes/Thread.html#method-c-new">Thread.new</a>
and <a href="../classes/Thread.html#method-c-start">Thread.start</a>). 
[Feature #14757]</p>
</li><li>
<p>timer thread is eliminated for platforms with POSIX timers. [Misc #14937]</p>
</li><li>
<p>Transient Heap (theap) is supported. [Bug #14858] [Feature #14989]</p>

<p>theap is a managed heap for short-living memory objects. For example,
making a small and short-living <a href="../classes/Hash.html">Hash</a>
object is x2 faster. With rdoc benchmark, we measured 6-7% performance
improvement.</p>
</li><li>
<p>Native implementations (arm32, arm64, ppc64le, win32, win64, x86, amd64) of
coroutines to improve performance of <a
href="../classes/Fiber.html">Fiber</a> significantly. [Feature #14739]</p>
</li></ul>

<h3 id="label-Miscellaneous+changes">Miscellaneous changes</h3>
<ul><li>
<p>On macOS, shared libraries no longer include a full version number of Ruby
in their names.  This eliminates the burden of each teeny upgrade on the
platform that users need to rebuild every extension library.</p>
<dl class="rdoc-list label-list"><dt>Before
<dd><ul><li>
<p>libruby.2.6.0.dylib</p>
</li><li>
<p>libruby.2.6.dylib -&gt; libruby.2.6.0.dylib</p>
</li><li>
<p>libruby.dylib -&gt; libruby.2.6.0.dylib</p>
</li></ul>
</dd><dt>After
<dd><ul><li>
<p>libruby.2.6.dylib</p>
</li><li>
<p>libruby.dylib -&gt; libruby.2.6.dylib</p>
</li></ul>
</dd></dl>
</li><li>
<p>Extracted misc/*.el files to <a
href="https://github.com/ruby/elisp">github.com/ruby/elisp</a></p>
</li></ul>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
              </div>

    </div>
  </body>
</html>
