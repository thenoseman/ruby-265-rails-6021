<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            CHANGELOG.md
        </h1>
        <ul class="files">
            
            <li>
                activejob/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/activejob/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2019-12-31 20:52:59 +0100</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.0.2.1+-28December+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2.1 (December 18, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.2+-28December+13-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2 (December 13, 2019)</h2>
<ul><li>
<p>Allow Sidekiq access to the underlying job class.</p>

<p>By having access to the Active Job class, Sidekiq can get access to any <code>sidekiq_options</code> which have been set on that Active Job type and serialize those options into Redis.</p>

<p><a href="https://github.com/mperham/sidekiq/blob/master/Changes.md#60">github.com/mperham/sidekiq/blob/master/Changes.md#60</a></p>

<p><em>Mike Perham</em></p>
</li></ul>

<h2 id="label-Rails+6.0.1+-28November+5-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.1 (November 5, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.0+-28August+16-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0 (August 16, 2019)</h2>
<ul><li>
<p><code>assert_enqueued_with</code> and <code>assert_performed_with</code> can now test jobs with relative delay.</p>

<p><em>Vlado Cingel</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc2+-28July+22-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc2 (July 22, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc1+-28April+24-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc1 (April 24, 2019)</h2>
<ul><li>
<p>Use individual execution counters when calculating retry delay.</p>

<p><em>Patrik Bóna</em></p>
</li><li>
<p>Make job argument assertions with <code>Time</code>, <code>ActiveSupport::TimeWithZone</code>, and <code>DateTime</code> work by dropping microseconds. Microsecond precision is lost during serialization.</p>

<p><em>Gannon McGibbon</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta3+-28March+11-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta3 (March 11, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta2+-28February+25-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta2 (February 25, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta1+-28January+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta1 (January 18, 2019)</h2>
<ul><li>
<p>Return false instead of the job instance when <code>enqueue</code> is aborted.</p>

<p>This will be the behavior in <a href="../../classes/Rails.html"><code>Rails</code></a> 6.1 but it can be controlled now with <code>config.active_job.return_false_on_aborted_enqueue</code>.</p>

<p><em>Kir Shatrov</em></p>
</li><li>
<p>Keep executions for each specific declaration</p>

<p>Each <code>retry_on</code> declaration has now its own specific executions counter. Before it was shared between all executions of a job.</p>

<p><em>Alberto Almagro</em></p>
</li><li>
<p>Allow all assertion helpers that have a <code>only</code> and <code>except</code> keyword to accept Procs.</p>

<p><em>Edouard Chin</em></p>
</li><li>
<p>Restore <code>HashWithIndifferentAccess</code> support to <code>ActiveJob::Arguments.deserialize</code>.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Include deserialized arguments in job instances returned from <code>assert_enqueued_with</code> and <code>assert_performed_with</code></p>

<p><em>Alan Wu</em></p>
</li><li>
<p>Allow <code>assert_enqueued_with</code>/<code>assert_performed_with</code> methods to accept a proc for the <code>args</code> argument. This is useful to check if only a subset of arguments matches your expectations.</p>

<p><em>Edouard Chin</em></p>
</li><li>
<p><code>ActionDispatch::IntegrationTest</code> includes <code>ActiveJob::TestHelper</code> module by default.</p>

<p><em>Ricardo Díaz</em></p>
</li><li>
<p>Added <code>enqueue_retry.active_job</code>, <code>retry_stopped.active_job</code>, and <code>discard.active_job</code> hooks.</p>

<p><em>steves</em></p>
</li><li>
<p>Allow <code>assert_performed_with</code> to be called without a block.</p>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Execution of <code>assert_performed_jobs</code>, and <code>assert_no_performed_jobs</code> without a block should respect passed <code>:except</code>, <code>:only</code>, and <code>:queue</code> options.</p>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Allow <code>:queue</code> option to job assertions and helpers.</p>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Allow <code>perform_enqueued_jobs</code> to be called without a block.</p>

<p>Performs all of the jobs that have been enqueued up to this point in the test.</p>

<p><em>Kevin Deisz</em></p>
</li><li>
<p>Move <code>enqueue</code>/<code>enqueue_at</code> notifications to an around callback.</p>

<p>Improves timing accuracy over the old after callback by including time spent writing to the adapter&#39;s <a href="../../classes/IO.html"><code>IO</code></a> implementation.</p>

<p><em>Zach Kemp</em></p>
</li><li>
<p>Allow call <code>assert_enqueued_with</code> with no block.</p>

<p>Example: "` def test_assert_enqueued_with  MyJob.perform_later(1,2,3)  assert_enqueued_with(job: MyJob, args: [1,2,3], queue: &#39;low&#39;)</p>

<p>MyJob.set(wait_until: <a href="../../classes/Date.html#method-c-tomorrow"><code>Date.tomorrow</code></a>.noon).perform_later  assert_enqueued_with(job: MyJob, at: <a href="../../classes/Date.html#method-c-tomorrow"><code>Date.tomorrow</code></a>.noon) end "`</p>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Allow passing multiple exceptions to <code>retry_on</code>, and <code>discard_on</code>.</p>

<p><em>George Claghorn</em></p>
</li><li>
<p>Pass the error instance as the second parameter of block executed by <code>discard_on</code>.</p>

<p>Fixes #32853.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>Remove support for Qu gem.</p>

<p>Reasons are that the Qu gem wasn&#39;t compatible since <a href="../../classes/Rails.html"><code>Rails</code></a> 5.1, gem development was stopped in 2014 and maintainers have confirmed its demise. See issue #32273</p>

<p><em>Alberto Almagro</em></p>
</li><li>
<p>Add support for timezones to Active Job.</p>

<p>Record what was the current timezone in effect when the job was enqueued and then restore when the job is executed in same way that the current locale is recorded and restored.</p>

<p><em>Andrew White</em></p>
</li><li>
<p><a href="../../classes/Rails.html"><code>Rails</code></a> 6 requires Ruby 2.5.0 or newer.</p>

<p><em>Jeremy Daer</em>, <em>Kasper Timm Hansen</em></p>
</li><li>
<p>Add support to define custom argument serializers.</p>

<p><em>Evgenii Pecherkin</em>, <em>Rafael Mendonça França</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/5-2-stable/activejob/CHANGELOG.md">5-2-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
