<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            CHANGELOG.md
        </h1>
        <ul class="files">
            
            <li>
                railties/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/railties/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2019-12-31 20:53:00 +0100</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.0.2.1+-28December+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2.1 (December 18, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.2+-28December+13-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2 (December 13, 2019)</h2>
<ul><li>
<p>Fix the collision check for the scaffold generator.</p>

<p><em>Ryan Robeson</em></p>
</li></ul>

<h2 id="label-Rails+6.0.1+-28November+5-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.1 (November 5, 2019)</h2>
<ul><li>
<p>The <code>zeitwerk:check</code> Rake task reports files outside the app&#39;s root directory, as in engines loaded from gems.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Fixed a possible error when using the evented file update checker.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>The sqlite3 database files created by the parallel testing feature are included in the default <code>.gitignore</code> file for newly-generated apps.</p>

<p><em>Yasuo Honda</em></p>
</li><li>
<p><code>rails new</code> generates a <code>.keep</code> file in <code>tmp/pids</code>. This fixes starting a server via <code>rackup</code> instead of <code>rails server</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0+-28August+16-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0 (August 16, 2019)</h2>
<ul><li>
<p><code>Rails.autoloaders.log!</code> is a logging shortcut to get the activity of the loaders printed to standard output. May be handy for troubleshooting.</p>

<p><em>Xavier Noria</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc2+-28July+22-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc2 (July 22, 2019)</h2>
<ul><li>
<p>The new configuration point <code>config.add_autoload_paths_to_load_path</code> allows users to opt-out from adding autoload paths to <code>$LOAD_PATH</code>. This flag is <code>true</code> by default, but it is recommended to be set to <code>false</code> in <code>:zeitwerk</code> mode early, in <code>config/application.rb</code>.</p>

<p>Zeitwerk uses only absolute paths internally, and applications running in <code>:zeitwerk</code> mode do not need <code>require_dependency</code>, so models, controllers, jobs, etc. do not need to be in <code>$LOAD_PATH</code>. Setting this to <code>false</code> saves Ruby from checking these directories when resolving <code>require</code> calls with relative paths, and saves Bootsnap work and RAM, since it does not need to build an index for them.</p>

<p><em>Xavier Noria</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc1+-28April+24-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc1 (April 24, 2019)</h2>
<ul><li>
<p>Applications upgrading to <a href="../../classes/Rails.html"><code>Rails</code></a> 6 can run the command</p>

<pre><code>bin/rails zeitwerk:check
</code></pre>

<p>to check if the project structure they were using with the classic autoloader is compatible with <code>:zeitwerk</code> mode.</p>

<p><em>Matilda Smeds</em> &amp; <em>Xavier Noria</em></p>
</li><li>
<p>Allow loading seeds without <a href="../../classes/ActiveJob.html"><code>ActiveJob</code></a>.</p>

<p>Fixes #35782</p>

<p><em>Jeremy Weathers</em></p>
</li><li>
<p><code>null: false</code> is set in the migrations by default for column pointed by <code>belongs_to</code> / <code>references</code> association generated by model generator.</p>

<p>Also deprecate passing {required} to the model generator.</p>

<p><em>Prathamesh Sonpatki</em></p>
</li><li>
<p>New applications get <code>config.cache_classes = false</code> in <code>config/environments/test.rb</code> unless <code>--skip-spring</code>.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Autoloading during initialization is deprecated.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Only force <code>:async</code> <a href="../../classes/ActiveJob.html"><code>ActiveJob</code></a> adapter to <code>:inline</code> during seeding.</p>

<p><em>BatedUrGonnaDie</em></p>
</li><li>
<p>The <code>connection</code> option of <code>rails dbconsole</code> command is deprecated in favor of <code>database</code> option.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>Replace <code>chromedriver-helper</code> gem with <code>webdrivers</code> in default <a href="../Gemfile.html">Gemfile</a>. <code>chromedriver-helper</code> is deprecated as of March 31, 2019 and won&#39;t receive any further updates.</p>

<p><em>Guillermo Iguaran‮</em></p>
</li><li>
<p>Applications running in <code>:zeitwerk</code> mode that use <code>bootsnap</code> need to upgrade <code>bootsnap</code> to at least 1.4.2.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Add <code>config.disable_sandbox</code> option to <a href="../../classes/Rails.html"><code>Rails</code></a> console.</p>

<p>This setting will disable <code>rails console --sandbox</code> mode, preventing developer from accidentally starting a sandbox console, which when left inactive, can cause the database server to run out of memory.</p>

<p><em>Prem Sichanugrist</em></p>
</li><li>
<p>Add <code>-e/--environment</code> option to <code>rails initializers</code>.</p>

<p><em>Yuji Yaginuma</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta3+-28March+11-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta3 (March 11, 2019)</h2>
<ul><li>
<p>Generate random development secrets</p>

<p>A random development secret is now generated to tmp/development_secret.txt</p>

<p>This avoids an issue where development mode servers were vulnerable to remote code execution.</p>

<p>Fixes CVE-2019-5420</p>

<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em>, <em>John Hawthorn</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta2+-28February+25-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta2 (February 25, 2019)</h2>
<ul><li>
<p>Fix non-symbol access to nested hashes returned from <code>Rails::Application.config_for</code> being broken by allowing non-symbol access with a deprecation notice.</p>

<p><em>Ufuk Kayserilioglu</em></p>
</li><li>
<p>Fix deeply nested namespace command printing.</p>

<p><em>Gannon McGibbon</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta1+-28January+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta1 (January 18, 2019)</h2>
<ul><li>
<p>Remove deprecated <code>after_bundle</code> helper inside plugins templates.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated support to old <code>config.ru</code> that use the application class as argument of <code>run</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>environment</code> argument from the rails commands.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>capify!</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Remove deprecated <code>config.secret_token</code>.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Seed database with inline <a href="../../classes/ActiveJob.html"><code>ActiveJob</code></a> job adapter.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Add <code>rails db:system:change</code> command for changing databases.</p>

<pre><code>bin/rails db:system:change --to=postgresql
   force  config/database.yml
    gsub  Gemfile
</code></pre>

<p>The change command copies a template <code>config/database.yml</code> with the target database adapter into your app, and replaces your database gem with the target database gem.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Add <code>rails test:channels</code>.</p>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Use original <code>bundler</code> environment variables during the process of generating a new rails project.</p>

<p><em>Marco Costa</em></p>
</li><li>
<p>Send Active Storage analysis and purge jobs to dedicated queues by default.</p>

<p>Analysis jobs now use the <code>:active_storage_analysis</code> queue, and purge jobs now use the <code>:active_storage_purge</code> queue. This matches Action Mailbox, which sends its jobs to dedicated queues by default.</p>

<p><em>George Claghorn</em></p>
</li><li>
<p>Add <code>rails test:mailboxes</code>.</p>

<p><em>George Claghorn</em></p>
</li><li>
<p>Introduce guard against DNS rebinding attacks.</p>

<p>The <code>ActionDispatch::HostAuthorization</code> is a new middleware that prevents against DNS rebinding and other <code>Host</code> header attacks. It is included in the development environment by default with the following configuration:</p>

<pre><code>Rails.application.config.hosts = [
  IPAddr.new(&quot;0.0.0.0/0&quot;), # All IPv4 addresses.
  IPAddr.new(&quot;::/0&quot;),      # All IPv6 addresses.
  &quot;localhost&quot;              # The localhost reserved domain.
]
</code></pre>

<p>In other environments <code>Rails.application.config.hosts</code> is empty and no <code>Host</code> header checks will be done. If you want to guard against header attacks on production, you have to manually permit the allowed hosts with:</p>

<pre><code>Rails.application.config.hosts &lt;&lt; &quot;product.com&quot;
</code></pre>

<p>The host of a request is checked against the <code>hosts</code> entries with the case operator (<code>#===</code>), which lets <code>hosts</code> support entries of type <code>Regexp</code>, <code>Proc</code> and <code>IPAddr</code> to name a few. Here is an example with a regexp.</p>

<pre><code># Allow requests from subdomains like `www.product.com` and
# `beta1.product.com`.
Rails.application.config.hosts &lt;&lt; /.*\.product\.com/
</code></pre>

<p>A special case is supported that allows you to permit all sub-domains:</p>

<pre><code># Allow requests from subdomains like `www.product.com` and
# `beta1.product.com`.
Rails.application.config.hosts &lt;&lt; &quot;.product.com&quot;
</code></pre>

<p><em>Genadi Samokovarov</em></p>
</li><li>
<p>Remove redundant suffixes on generated helpers.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Remove redundant suffixes on generated integration tests.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Fix boolean interaction in scaffold system tests.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Remove redundant suffixes on generated system tests.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Add an <code>abort_on_failure</code> boolean option to the generator method that shell out (<code>generate</code>, <code>rake</code>, <code>rails_command</code>) to abort the generator if the command fails.</p>

<p><em>David Rodríguez</em></p>
</li><li>
<p>Remove <code>app/assets</code> and <code>app/javascript</code> from <code>eager_load_paths</code> and <code>autoload_paths</code>.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Use Ids instead of memory addresses when displaying references in scaffold views.</p>

<p>Fixes #29200.</p>

<p><em>Rasesh Patel</em></p>
</li><li>
<p>Adds support for multiple databases to <code>rails db:migrate:status</code>. Subtasks are also added to get the status of individual databases (eg. <code>rails db:migrate:status:animals</code>).</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Use Webpacker by default to manage app-level JavaScript through the new app/javascript directory. Sprockets is now solely in charge, by default, of compiling CSS and other static assets. Action Cable channel generators will create ES6 stubs rather than use CoffeeScript. Active Storage, Action Cable, Turbolinks, and Rails-UJS are loaded by a new application.js pack. Generators no longer generate JavaScript stubs.</p>

<p><em>DHH</em>, <em>Lachlan Sylvester</em></p>
</li><li>
<p>Add <code>database</code> (aliased as <code>db</code>) option to model generator to allow setting the database. This is useful for applications that use multiple databases and put migrations per database in their own directories.</p>

<pre><code>bin/rails g model Room capacity:integer --database=kingston
      invoke  active_record
      create    db/kingston_migrate/20180830151055_create_rooms.rb
</code></pre>

<p>Because rails scaffolding uses the model generator, you can also specify a database with the scaffold generator.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Raise an error when "recyclable cache keys" are being used by a cache store that does not explicitly support it. Custom cache keys that do support this feature can bypass this error by implementing the <code>supports_cache_versioning?</code> method on their class and returning a truthy value.</p>

<p><em>Richard Schneeman</em></p>
</li><li>
<p>Support environment specific credentials overrides.</p>

<p>So any environment will look for <code>config/credentials/#{Rails.env}.yml.enc</code> and fall back to <code>config/credentials.yml.enc</code>.</p>

<p>The encryption key can be in <code>ENV["RAILS_MASTER_KEY"]</code> or <code>config/credentials/production.key</code>.</p>

<p>Environment credentials overrides can be edited with <code>rails credentials:edit --environment production</code>. If no override is set up for the passed environment, it will be created.</p>

<p>Additionally, the default lookup paths can be overwritten with these configs:</p>
<ul><li>
<p><code>config.credentials.content_path</code></p>
</li><li>
<p><code>config.credentials.key_path</code></p>
</li></ul>

<p><em>Wojciech Wnętrzak</em></p>
</li><li>
<p>Make <code>ActiveSupport::Cache::NullStore</code> the default cache store in the test environment.</p>

<p><em>Michael C. Nelson</em></p>
</li><li>
<p>Emit warning for unknown inflection rule when generating model.</p>

<p><em>Yoshiyuki Kinjo</em></p>
</li><li>
<p>Add <code>database</code> (aliased as <code>db</code>) option to migration generator.</p>

<p>If you&#39;re using multiple databases and have a folder for each database for migrations (ex db/migrate and db/new_db_migrate) you can now pass the <code>--database</code> option to the generator to make sure the the migration is inserted into the correct folder.</p>

<pre><code>rails g migration CreateHouses --database=kingston
  invoke  active_record
  create    db/kingston_migrate/20180830151055_create_houses.rb
</code></pre>

<p><em>Eileen M. Uchitelle</em></p>
</li><li>
<p>Deprecate <code>rake routes</code> in favor of <code>rails routes</code>.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>Deprecate <code>rake initializers</code> in favor of <code>rails initializers</code>.</p>

<p><em>Annie-Claude Côté</em></p>
</li><li>
<p>Deprecate <code>rake dev:cache</code> in favor of <code>rails dev:cache</code>.</p>

<p><em>Annie-Claude Côté</em></p>
</li><li>
<p>Deprecate <code>rails notes</code> subcommands in favor of passing an <code>annotations</code> argument to <code>rails notes</code>.</p>

<p>The following subcommands are replaced by passing <code>--annotations</code> or <code>-a</code> to <code>rails notes</code>: - <code>rails notes:custom ANNOTATION=custom</code> is deprecated in favor of using <code>rails notes -a custom</code>. - <code>rails notes:optimize</code> is deprecated in favor of using <code>rails notes -a OPTIMIZE</code>. - <code>rails notes:todo</code> is deprecated in favor of using<code>rails notes -a TODO</code>. - <code>rails notes:fixme</code> is deprecated in favor of using <code>rails notes -a FIXME</code>.</p>

<p><em>Annie-Claude Côté</em></p>
</li><li>
<p>Deprecate <code>SOURCE_ANNOTATION_DIRECTORIES</code> environment variable used by <code>rails notes</code> through <code>Rails::SourceAnnotationExtractor::Annotation</code> in favor of using <code>config.annotations.register_directories</code>.</p>

<p><em>Annie-Claude Côté</em></p>
</li><li>
<p>Deprecate <code>rake notes</code> in favor of <code>rails notes</code>.</p>

<p><em>Annie-Claude Côté</em></p>
</li><li>
<p>Don&#39;t generate unused files in <code>app:update</code> task.</p>

<p>Skip the assets&#39; initializer when sprockets isn&#39;t loaded.</p>

<p>Skip <code>config/spring.rb</code> when spring isn&#39;t loaded.</p>

<p>Skip yarn&#39;s contents when yarn integration isn&#39;t used.</p>

<p><em>Tsukuru Tanimichi</em></p>
</li><li>
<p>Make the master.key file read-only for the owner upon generation on POSIX-compliant systems.</p>

<p>Previously:</p>

<pre><code>$ ls -l config/master.key
-rw-r--r--   1 owner  group      32 Jan 1 00:00 master.key
</code></pre>

<p>Now:</p>

<pre><code>$ ls -l config/master.key
-rw-------   1 owner  group      32 Jan 1 00:00 master.key
</code></pre>

<p>Fixes #32604.</p>

<p><em>Jose Luis Duran</em></p>
</li><li>
<p>Deprecate support for using the <code>HOST</code> environment variable to specify the server IP.</p>

<p>The <code>BINDING</code> environment variable should be used instead.</p>

<p>Fixes #29516.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>Deprecate passing <a href="../../classes/Rack.html"><code>Rack</code></a> server name as a regular argument to <code>rails server</code>.</p>

<p>Previously:</p>

<pre><code>$ bin/rails server thin
</code></pre>

<p>There wasn&#39;t an explicit option for the <a href="../../classes/Rack.html"><code>Rack</code></a> server to use, now we have the <code>--using</code> option with the <code>-u</code> short switch.</p>

<p>Now:</p>

<pre><code>$ bin/rails server -u thin
</code></pre>

<p>This change also improves the error message if a missing or mistyped rack server is given.</p>

<p><em>Genadi Samokovarov</em></p>
</li><li>
<p>Add "rails routes --expanded" option to output routes in expanded mode like "psql --expanded". Result looks like:</p>

<pre><code>$ rails routes --expanded
--[ Route 1 ]------------------------------------------------------------
Prefix            | high_scores
Verb              | GET
URI               | /high_scores(.:format)
Controller#Action | high_scores#index
--[ Route 2 ]------------------------------------------------------------
Prefix            | new_high_score
Verb              | GET
URI               | /high_scores/new(.:format)
Controller#Action | high_scores#new
</code></pre>

<p><em>Benoit Tigeot</em></p>
</li><li>
<p><a href="../../classes/Rails.html"><code>Rails</code></a> 6 requires Ruby 2.5.0 or newer.</p>

<p><em>Jeremy Daer</em>, <em>Kasper Timm Hansen</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/5-2-stable/railties/CHANGELOG.md">5-2-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
