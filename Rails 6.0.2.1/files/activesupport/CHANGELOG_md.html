<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            CHANGELOG.md
        </h1>
        <ul class="files">
            
            <li>
                activesupport/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/activesupport/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2019-12-31 20:53:00 +0100</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.0.2.1+-28December+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2.1 (December 18, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.2+-28December+13-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2 (December 13, 2019)</h2>
<ul><li>
<p>Eager load translations during initialization.</p>

<p><em>Diego Plentz</em></p>
</li><li>
<p>Use per-thread CPU time clock on <code>ActiveSupport::Notifications</code>.</p>

<p><em>George Claghorn</em></p>
</li></ul>

<h2 id="label-Rails+6.0.1+-28November+5-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.1 (November 5, 2019)</h2>
<ul><li>
<p><code>ActiveSupport::SafeBuffer</code> supports <code>Enumerator</code> methods.</p>

<p><em>Shugo Maeda</em></p>
</li><li>
<p>The Redis cache store fails gracefully when the server returns a "max number of clients reached" error.</p>

<p><em>Brandon Medenwald</em></p>
</li><li>
<p>Fixed that mutating a value returned by a memory cache store would unexpectedly change the cached value.</p>

<p><em>Jonathan Hyman</em></p>
</li><li>
<p>The default inflectors in <code>zeitwerk</code> mode support overrides:</p>

<pre><code># config/initializers/zeitwerk.rb
Rails.autoloaders.each do |autoloader|
  autoloader.inflector.inflect(
    &quot;html_parser&quot; =&gt; &quot;HTMLParser&quot;,
    &quot;ssl_error&quot;   =&gt; &quot;SSLError&quot;
  )
end
</code></pre>

<p>That way, you can tweak how individual basenames are inflected without touching Active Support inflection rules, which are global. These inflectors fallback to <code>String#camelize</code>, so existing inflection rules are still taken into account for non-overridden basenames.</p>

<p>Please, check the <a href="https://guides.rubyonrails.org/v6.0/autoloading_and_reloading_constants.html#customizing-inflections">autoloading guide for zeitwerk mode</a> if you prefer not to depend on <code>String#camelize</code> at all.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Improve <code>Range#===</code>, <code>Range#include?</code>, and <code>Range#cover?</code> to work with beginless (startless) and endless range targets.</p>

<p><em>Allen Hsu</em>, <em>Andrew Hodgkinson</em></p>
</li><li>
<p>Don&#39;t use <code>Process#clock_gettime(CLOCK_THREAD_CPUTIME_ID)</code> on Solaris.</p>

<p><em>Iain Beeston</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0+-28August+16-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0 (August 16, 2019)</h2>
<ul><li>
<p>Let <code>require_dependency</code> in <code>zeitwerk</code> mode look the autoload paths up for better backwards compatibility.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Let <code>require_dependency</code> in <code>zeitwerk</code> mode support arguments that respond to <code>to_path</code> for better backwards compatibility.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Make <a href="../../classes/ActiveSupport/Logger.html"><code>ActiveSupport::Logger</code></a> Fiber-safe. Fixes #36752.</p>

<p>Use <code>Fiber.current.__id__</code> in <code>ActiveSupport::Logger#local_level=</code> in order to make log level local to Ruby Fibers in addition to Threads.</p>

<p>Example:</p>

<pre><code>logger = ActiveSupport::Logger.new(STDOUT)
logger.level = 1
p &quot;Main is debug? #{logger.debug?}&quot;

Fiber.new {
  logger.local_level = 0
  p &quot;Thread is debug? #{logger.debug?}&quot;
}.resume

p &quot;Main is debug? #{logger.debug?}&quot;
</code></pre>

<p>Before:</p>

<pre><code>Main is debug? false
Thread is debug? true
Main is debug? true
</code></pre>

<p>After:</p>

<pre><code>Main is debug? false
Thread is debug? true
Main is debug? false
</code></pre>

<p><em>Alexander Varnin</em></p>
</li><li>
<p>Do not delegate missing <code>marshal_dump</code> and <code>_dump</code> methods via the <code>delegate_missing_to</code> extension. This avoids unintentionally adding instance variables when calling <code>Marshal.dump(object)</code>, should the delegation target of <code>object</code> be a method which would otherwise add them. Fixes #36522.</p>

<p><em>Aaron Lipman</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc2+-28July+22-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc2 (July 22, 2019)</h2>
<ul><li>
<p><code>truncate</code> would return the original string if it was too short to be truncated and a frozen string if it were long enough to be truncated. Now truncate will consistently return an unfrozen string regardless. This behavior is consistent with <code>gsub</code> and <code>strip</code>.</p>

<p>Before:</p>

<pre><code>&#39;foobar&#39;.truncate(5).frozen?
# =&gt; true
&#39;foobar&#39;.truncate(6).frozen?
# =&gt; false
</code></pre>

<p>After:</p>

<pre><code>&#39;foobar&#39;.truncate(5).frozen?
# =&gt; false
&#39;foobar&#39;.truncate(6).frozen?
# =&gt; false
</code></pre>

<p><em>Jordan Thomas</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc1+-28April+24-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc1 (April 24, 2019)</h2>
<ul><li>
<p>Introduce <code>ActiveSupport::ActionableError</code>.</p>

<p>Actionable errors let&#39;s you dispatch actions from Rails&#39; error pages. This can help you save time if you have a clear action for the resolution of common development errors.</p>

<p>The de-facto example are pending migrations. Every time pending migrations are found, a middleware raises an error. With actionable errors, you can run the migrations right from the error page. Other examples include <a href="../../classes/Rails.html"><code>Rails</code></a> plugins that need to run a rake task to setup themselves. They can now raise actionable errors to run the setup straight from the error pages.</p>

<p>Here is how to define an actionable error:</p>

<pre><code>class PendingMigrationError &lt; MigrationError #:nodoc:
  include ActiveSupport::ActionableError

  action &quot;Run pending migrations&quot; do
    ActiveRecord::Tasks::DatabaseTasks.migrate
  end
end
</code></pre>

<p>To make an error actionable, include the <code>ActiveSupport::ActionableError</code> module and invoke the <code>action</code> class macro to define the action. An action needs a name and a procedure to execute. The name is shown as the name of a button on the error pages. Once clicked, it will invoke the given procedure.</p>

<p><em>Vipul A M</em>, <em>Yao Jie</em>, <em>Genadi Samokovarov</em></p>
</li><li>
<p>Preserve <code>html_safe?</code> status on <code>ActiveSupport::SafeBuffer#*</code>.</p>

<p>Before:</p>

<pre><code>(&quot;&lt;br /&gt;&quot;.html_safe * 2).html_safe? #=&gt; nil
</code></pre>

<p>After:</p>

<pre><code>(&quot;&lt;br /&gt;&quot;.html_safe * 2).html_safe? #=&gt; true
</code></pre>

<p><em>Ryo Nakamura</em></p>
</li><li>
<p>Calling test methods with <code>with_info_handler</code> method to allow minitest-hooks plugin to work.</p>

<p><em>Mauri Mustonen</em></p>
</li><li>
<p>The Zeitwerk compatibility interface for <code>ActiveSupport::Dependencies</code> no longer implements <code>autoloaded_constants</code> or <code>autoloaded?</code> (undocumented, anyway). Experience shows introspection does not have many use cases, and troubleshooting is done by logging. With this design trade-off we are able to use even less memory in all environments.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Depends on Zeitwerk 2, which stores less metadata if reloading is disabled and hence uses less memory when <code>config.cache_classes</code> is <code>true</code>, a standard setup in production.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>In <code>:zeitwerk</code> mode, eager load directories in engines and applications only if present in their respective <code>config.eager_load_paths</code>.</p>

<p>A common use case for this is adding <code>lib</code> to <code>config.autoload_paths</code>, but not to <code>config.eager_load_paths</code>. In that configuration, for example, files in the <code>lib</code> directory should not be eager loaded.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Fix bug in <a href="../../classes/Range.html"><code>Range</code></a> comparisons when comparing to an excluded-end <a href="../../classes/Range.html"><code>Range</code></a></p>

<p>Before:</p>

<pre><code>(1..10).cover?(1...11) # =&gt; false
</code></pre>

<p>After:</p>

<pre><code>(1..10).cover?(1...11) # =&gt; true
</code></pre>

<p>With the same change for <code>Range#include?</code> and <code>Range#===</code>.</p>

<p><em>Owen Stephens</em></p>
</li><li>
<p>Use weak references in descendants tracker to allow anonymous subclasses to be garbage collected.</p>

<p><em>Edgars Beigarts</em></p>
</li><li>
<p>Update <code>ActiveSupport::Notifications::Instrumenter#instrument</code> to make passing a block optional. This will let users use <code>ActiveSupport::Notifications</code> messaging features outside of instrumentation.</p>

<p><em>Ali Ibrahim</em></p>
</li><li>
<p>Fix <code>Time#advance</code> to work with dates before 1001-03-07</p>

<p>Before:</p>

<pre><code>Time.utc(1001, 3, 6).advance(years: -1) # =&gt; 1000-03-05 00:00:00 UTC
</code></pre>

<p>After</p>

<pre><code>Time.utc(1001, 3, 6).advance(years: -1) # =&gt; 1000-03-06 00:00:00 UTC
</code></pre>

<p>Note that this doesn&#39;t affect <code>DateTime#advance</code> as that doesn&#39;t use a proleptic calendar.</p>

<p><em>Andrew White</em></p>
</li><li>
<p>In Zeitwerk mode, engines are now managed by the <code>main</code> autoloader. Engines may reference application constants, if the application is reloaded and we do not reload engines, they won&#39;t use the reloaded application code.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Add support for supplying <code>locale</code> to <code>transliterate</code> and <code>parameterize</code>.</p>

<pre><code>I18n.backend.store_translations(:de, i18n: { transliterate: { rule: { &quot;√º&quot; =&gt; &quot;ue&quot; } } })

ActiveSupport::Inflector.transliterate(&quot;√º&quot;, locale: :de) # =&gt; &quot;ue&quot;
&quot;F√ºnf autos&quot;.parameterize(locale: :de) # =&gt; &quot;fuenf-autos&quot;
ActiveSupport::Inflector.parameterize(&quot;F√ºnf autos&quot;, locale: :de) # =&gt; &quot;fuenf-autos&quot;
</code></pre>

<p><em>Kaan Ozkan</em>, <em>Sharang Dashputre</em></p>
</li><li>
<p>Allow <code>Array#excluding</code> and <code>Enumerable#excluding</code> to deal with a passed array gracefully.</p>

<pre><code>[ 1, 2, 3, 4, 5 ].excluding([4, 5]) # =&gt; [ 1, 2, 3 ]
</code></pre>

<p><em>DHH</em></p>
</li><li>
<p>Renamed <code>Array#without</code> and <code>Enumerable#without</code> to <code>Array#excluding</code> and <code>Enumerable#excluding</code>, to create parity with <code>Array#including</code> and <code>Enumerable#including</code>. Retained the old names as aliases.</p>

<p><em>DHH</em></p>
</li><li>
<p>Added <code>Array#including</code> and <code>Enumerable#including</code> to conveniently enlarge a collection with more members using a method rather than an operator:</p>

<pre><code>[ 1, 2, 3 ].including(4, 5) # =&gt; [ 1, 2, 3, 4, 5 ]
post.authors.including(Current.person) # =&gt; All the authors plus the current person!
</code></pre>

<p><em>DHH</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta3+-28March+11-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta3 (March 11, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta2+-28February+25-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta2 (February 25, 2019)</h2>
<ul><li>
<p>New autoloading based on <a href="https://github.com/fxn/zeitwerk">Zeitwerk</a>.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Revise <code>ActiveSupport::Notifications.unsubscribe</code> to correctly handle Regex or other multiple-pattern subscribers.</p>

<p><em>Zach Kemp</em></p>
</li><li>
<p>Add <code>before_reset</code> callback to <code>CurrentAttributes</code> and define <code>after_reset</code> as an alias of <code>resets</code> for symmetry.</p>

<p><em>Rosa Gutierrez</em></p>
</li><li>
<p>Remove the <code>Kernel#`</code> override that suppresses ENOENT and accidentally returns nil on Unix systems.</p>

<p><em>Akinori Musha</em></p>
</li><li>
<p>Add <code>ActiveSupport::HashWithIndifferentAccess#assoc</code>.</p>

<p><code>assoc</code> can now be called with either a string or a symbol.</p>

<p><em>Stefan Sch√º√üler</em></p>
</li><li>
<p>Add <code>Hash#deep_transform_values</code>, and <code>Hash#deep_transform_values!</code>.</p>

<p><em>Guillermo Iguaran</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta1+-28January+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta1 (January 18, 2019)</h2>
<ul><li>
<p>Remove deprecated <code>Module#reachable?</code> method.</p>

<p><em>Rafael Mendon√ßa Fran√ßa</em></p>
</li><li>
<p>Remove deprecated <code>#acronym_regex</code> method from <code>Inflections</code>.</p>

<p><em>Rafael Mendon√ßa Fran√ßa</em></p>
</li><li>
<p>Fix <code>String#safe_constantize</code> throwing a <code>LoadError</code> for incorrectly cased constant references.</p>

<p><em>Keenan Brock</em></p>
</li><li>
<p>Preserve key order passed to <code>ActiveSupport::CacheStore#fetch_multi</code>.</p>

<p><code>fetch_multi(*names)</code> now returns its results in the same order as the <code>*names</code> requested, rather than returning cache hits followed by cache misses.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>If the same block is <code>included</code> multiple times for a Concern, an exception is no longer raised.</p>

<p><em>Mark J. Titorenko</em>, <em>Vlad Bokov</em></p>
</li><li>
<p>Fix bug where <code>#to_options</code> for <code>ActiveSupport::HashWithIndifferentAccess</code> would not act as alias for <code>#symbolize_keys</code>.</p>

<p><em>Nick Weiland</em></p>
</li><li>
<p>Improve the logic that detects non-autoloaded constants.</p>

<p><em>Jan Habermann</em>, <em>Xavier Noria</em></p>
</li><li>
<p>Deprecate <code>ActiveSupport::Multibyte::Unicode#pack_graphemes(array)</code> and <code>ActiveSupport::Multibyte::Unicode#unpack_graphemes(string)</code> in favor of <code>array.flatten.pack(&quot;U*&quot;)</code> and <code>string.scan(/\X/).map(&amp;:codepoints)</code>, respectively.</p>

<p><em>Francesco Rodr√≠guez</em></p>
</li><li>
<p>Deprecate <code>ActiveSupport::Multibyte::Chars.consumes?</code> in favor of <code>String#is_utf8?</code>.</p>

<p><em>Francesco Rodr√≠guez</em></p>
</li><li>
<p>Fix duration being rounded to a full second. <code>   time = DateTime.parse(&quot;2018-1-1&quot;)   time += 0.51.seconds </code> Will now correctly add 0.51 second and not 1 full second.</p>

<p><em>Edouard Chin</em></p>
</li><li>
<p>Deprecate <code>ActiveSupport::Multibyte::Unicode#normalize</code> and <code>ActiveSupport::Multibyte::Chars#normalize</code> in favor of <code>String#unicode_normalize</code></p>

<p><em>Francesco Rodr√≠guez</em></p>
</li><li>
<p>Deprecate <code>ActiveSupport::Multibyte::Unicode#downcase/upcase/swapcase</code> in favor of <code>String#downcase/upcase/swapcase</code>.</p>

<p><em>Francesco Rodr√≠guez</em></p>
</li><li>
<p>Add <code>ActiveSupport::ParameterFilter</code>.</p>

<p><em>Yoshiyuki Kinjo</em></p>
</li><li>
<p>Rename <code>Module#parent</code>, <code>Module#parents</code>, and <code>Module#parent_name</code> to <code>module_parent</code>, <code>module_parents</code>, and <code>module_parent_name</code>.</p>

<p><em>Gannon McGibbon</em></p>
</li><li>
<p>Deprecate the use of <code>LoggerSilence</code> in favor of <code>ActiveSupport::LoggerSilence</code></p>

<p><em>Edouard Chin</em></p>
</li><li>
<p>Deprecate using negative limits in <code>String#first</code> and <code>String#last</code>.</p>

<p><em>Gannon McGibbon</em>, <em>Eric Turner</em></p>
</li><li>
<p>Fix bug where <code>#without</code> for <code>ActiveSupport::HashWithIndifferentAccess</code> would fail with symbol arguments</p>

<p><em>Abraham Chan</em></p>
</li><li>
<p>Treat <code>#delete_prefix</code>, <code>#delete_suffix</code> and <code>#unicode_normalize</code> results as non-<code>html_safe</code>. Ensure safety of arguments for <code>#insert</code>, <code>#[]=</code> and <code>#replace</code> calls on <code>html_safe</code> Strings.</p>

<p><em>Janosch M√ºller</em></p>
</li><li>
<p>Changed <code>ActiveSupport::TaggedLogging.new</code> to return a new logger instance instead of mutating the one received as parameter.</p>

<p><em>Thierry Joyal</em></p>
</li><li>
<p>Define <code>unfreeze_time</code> as an alias of <code>travel_back</code> in <code>ActiveSupport::Testing::TimeHelpers</code>.</p>

<p>The alias is provided for symmetry with <code>freeze_time</code>.</p>

<p><em>Ryan Davidson</em></p>
</li><li>
<p>Add support for tracing constant autoloads. Just throw</p>

<pre><code>ActiveSupport::Dependencies.logger = Rails.logger
ActiveSupport::Dependencies.verbose = true
</code></pre>

<p>in an initializer.</p>

<p><em>Xavier Noria</em></p>
</li><li>
<p>Maintain <code>html_safe?</code> on html_safe strings when sliced.</p>

<pre><code>string = &quot;&lt;div&gt;test&lt;/div&gt;&quot;.html_safe
string[-1..1].html_safe? # =&gt; true
</code></pre>

<p><em>Elom Gomez</em>, <em>Yumin Wong</em></p>
</li><li>
<p>Add <code>Array#extract!</code>.</p>

<p>The method removes and returns the elements for which the block returns a true value. If no block is given, an Enumerator is returned instead.</p>

<pre><code>numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
odd_numbers = numbers.extract! { |number| number.odd? } # =&gt; [1, 3, 5, 7, 9]
numbers # =&gt; [0, 2, 4, 6, 8]
</code></pre>

<p><em>bogdanvlviv</em></p>
</li><li>
<p>Support not to cache <code>nil</code> for <code>ActiveSupport::Cache#fetch</code>.</p>

<pre><code>cache.fetch(&#39;bar&#39;, skip_nil: true) { nil }
cache.exist?(&#39;bar&#39;) # =&gt; false
</code></pre>

<p><em>Martin Hong</em></p>
</li><li>
<p>Add ‚Äúevent object‚Äù support to the notification system. Before this change, end users were forced to create hand made artisanal event objects on their own, like this:</p>

<pre><code>ActiveSupport::Notifications.subscribe(&#39;wait&#39;) do |*args|
  @event = ActiveSupport::Notifications::Event.new(*args)
end

ActiveSupport::Notifications.instrument(&#39;wait&#39;) do
  sleep 1
end

@event.duration # =&gt; 1000.138
</code></pre>

<p>After this change, if the block passed to <code>subscribe</code> only takes one parameter, the framework will yield an event object to the block. Now end users are no longer required to make their own:</p>

<pre><code>ActiveSupport::Notifications.subscribe(&#39;wait&#39;) do |event|
  @event = event
end

ActiveSupport::Notifications.instrument(&#39;wait&#39;) do
  sleep 1
end

p @event.allocations # =&gt; 7
p @event.cpu_time    # =&gt; 0.256
p @event.idle_time   # =&gt; 1003.2399
</code></pre>

<p>Now you can enjoy event objects without making them yourself. Neat!</p>

<p><em>Aaron ‚Äút.lo‚Äù Patterson</em></p>
</li><li>
<p>Add cpu_time, idle_time, and allocations to Event.</p>

<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em></p>
</li><li>
<p>RedisCacheStore: support key expiry in increment/decrement.</p>

<p>Pass <code>:expires_in</code> to <code>#increment</code> and <code>#decrement</code> to set a Redis EXPIRE on the key.</p>

<p>If the key is already set to expire, RedisCacheStore won&#39;t extend its expiry.</p>

<pre><code>Rails.cache.increment(&quot;some_key&quot;, 1, expires_in: 2.minutes)
</code></pre>

<p><em>Jason Lee</em></p>
</li><li>
<p>Allow <code>Range#===</code> and <code>Range#cover?</code> on <a href="../../classes/Range.html"><code>Range</code></a>.</p>

<p><code>Range#cover?</code> can now accept a range argument like <code>Range#include?</code> and <code>Range#===</code>. <code>Range#===</code> works correctly on Ruby 2.6. <code>Range#include?</code> is moved into a new file, with these two methods.</p>

<p><em>Requiring active_support/core_ext/range/include_range is now deprecated.</em> <em>Use <code>require &quot;active_support/core_ext/range/compare_range&quot;</code> instead.</em></p>

<p><em>utilum</em></p>
</li><li>
<p>Add <code>index_with</code> to <a href="../../classes/Enumerable.html"><code>Enumerable</code></a>.</p>

<p>Allows creating a hash from an enumerable with the value from a passed block or a default argument.</p>

<pre><code>%i( title body ).index_with { |attr| post.public_send(attr) }
# =&gt; { title: &quot;hey&quot;, body: &quot;what&#39;s up?&quot; }

%i( title body ).index_with(nil)
# =&gt; { title: nil, body: nil }
</code></pre>

<p>Closely linked with <code>index_by</code>, which creates a hash where the keys are extracted from a block.</p>

<p><em>Kasper Timm Hansen</em></p>
</li><li>
<p>Fix bug where <code>ActiveSupport::TimeZone.all</code> would fail when tzinfo data for any timezone defined in <code>ActiveSupport::TimeZone::MAPPING</code> is missing.</p>

<p><em>Dominik Sander</em></p>
</li><li>
<p>Redis cache store: <code>delete_matched</code> no longer blocks the Redis server. (Switches from evaled Lua to a batched SCAN + DEL loop.)</p>

<p><em>Gleb Mazovetskiy</em></p>
</li><li>
<p>Fix bug where <code>ActiveSupport::Cache</code> will massively inflate the storage size when compression is enabled (which is true by default). This patch does not attempt to repair existing data: please manually flush the cache to clear out the problematic entries.</p>

<p><em>Godfrey Chan</em></p>
</li><li>
<p>Fix bug where <code>URI.unescape</code> would fail with mixed Unicode/escaped character input:</p>

<pre><code>URI.unescape(&quot;\xe3\x83\x90&quot;)  # =&gt; &quot;„Éê&quot;
URI.unescape(&quot;%E3%83%90&quot;)  # =&gt; &quot;„Éê&quot;
URI.unescape(&quot;\xe3\x83\x90%E3%83%90&quot;)  # =&gt; Encoding::CompatibilityError
</code></pre>

<p><em>Ashe Connor</em>, <em>Aaron Patterson</em></p>
</li><li>
<p>Add <code>before?</code> and <code>after?</code> methods to <code>Date</code>, <code>DateTime</code>, <code>Time</code>, and <code>TimeWithZone</code>.</p>

<p><em>Nick Holden</em></p>
</li><li>
<p><code>ActiveSupport::Inflector#ordinal</code> and <code>ActiveSupport::Inflector#ordinalize</code> now support translations through I18n.</p>

<pre><code># locale/fr.rb

{
  fr: {
    number: {
      nth: {
        ordinals: lambda do |_key, number:, **_options|
          if number.to_i.abs == 1
            &#39;er&#39;
          else
            &#39;e&#39;
          end
        end,

        ordinalized: lambda do |_key, number:, **_options|
          &quot;#{number}#{ActiveSupport::Inflector.ordinal(number)}&quot;
        end
      }
    }
  }
}
</code></pre>

<p><em>Christian Blais</em></p>
</li><li>
<p>Add <code>:private</code> option to ActiveSupport&#39;s <code>Module#delegate</code> in order to delegate methods as private:</p>

<pre><code>class User &lt; ActiveRecord::Base
  has_one :profile
  delegate :date_of_birth, to: :profile, private: true

  def age
    Date.today.year - date_of_birth.year
  end
end

# User.new.age  # =&gt; 29
# User.new.date_of_birth
# =&gt; NoMethodError: private method `date_of_birth&#39; called for #&lt;User:0x00000008221340&gt;
</code></pre>

<p><em>Tomas Valent</em></p>
</li><li>
<p><code>String#truncate_bytes</code> to truncate a string to a maximum bytesize without breaking multibyte characters or grapheme clusters like üë©‚Äçüë©‚Äçüë¶‚Äçüë¶.</p>

<p><em>Jeremy Daer</em></p>
</li><li>
<p><code>String#strip_heredoc</code> preserves frozenness.</p>

<pre><code>&quot;foo&quot;.freeze.strip_heredoc.frozen?  # =&gt; true
</code></pre>

<p>Fixes that frozen string literals would inadvertently become unfrozen:</p>

<pre><code># frozen_string_literal: true

foo = &lt;&lt;-MSG.strip_heredoc
  la la la
MSG

foo.frozen?  # =&gt; false !??
</code></pre>

<p><em>Jeremy Daer</em></p>
</li><li>
<p><a href="../../classes/Rails.html"><code>Rails</code></a> 6 requires Ruby 2.5.0 or newer.</p>

<p><em>Jeremy Daer</em>, <em>Kasper Timm Hansen</em></p>
</li><li>
<p>Adds parallel testing to <a href="../../classes/Rails.html"><code>Rails</code></a>.</p>

<p>Parallelize your test suite with forked processes or threads.</p>

<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/5-2-stable/activesupport/CHANGELOG.md">5-2-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
