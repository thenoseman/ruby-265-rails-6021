<!DOCTYPE html>
<html lang="en">
<head>
    <title>CHANGELOG.md</title>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>
    <div class="banner">
        
        <h1>
            CHANGELOG.md
        </h1>
        <ul class="files">
            
            <li>
                actionview/CHANGELOG.md
                
                    <a href="https://github.com/rails/rails/blob/f33d52c95217212cbacc8d5e44b5a8e3cdc6f5b3/actionview/CHANGELOG.md" target="_blank" class="github_url">on GitHub</a>
                
            </li>
            <li>Last modified: 2019-12-31 20:52:59 +0100</li>
        </ul>
    </div>

    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h2 id="label-Rails+6.0.2.1+-28December+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2.1 (December 18, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.2+-28December+13-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.2 (December 13, 2019)</h2>
<ul><li>
<p>No changes.</p>
</li></ul>

<h2 id="label-Rails+6.0.1+-28November+5-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.1 (November 5, 2019)</h2>
<ul><li>
<p>UJS avoids <code>Element.closest()</code> for IE 9 compatibility.</p>

<p><em>George Claghorn</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0+-28August+16-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0 (August 16, 2019)</h2>
<ul><li>
<p>ActionView::Helpers::SanitizeHelper: support rails-html-sanitizer 1.1.0.</p>

<p><em>Juanito Fatas</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc2+-28July+22-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc2 (July 22, 2019)</h2>
<ul><li>
<p>Fix <code>select_tag</code> so that it doesn&#39;t change <code>options</code> when <code>include_blank</code> is present.</p>

<p><em>Younes SERRAJ</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.rc1+-28April+24-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.rc1 (April 24, 2019)</h2>
<ul><li>
<p>Fix partial caching skips same item issue</p>

<p>If we render cached collection partials with repeated items, those repeated items will get skipped. For example, if you have 5 identical items in your collection, <a href="../../classes/Rails.html"><code>Rails</code></a> only renders the first one when <code>cached</code> is set to true. But it should render all 5 items instead.</p>

<p>Fixes #35114.</p>

<p><em>Stan Lo</em></p>
</li><li>
<p>Only clear <a href="../../classes/ActionView.html"><code>ActionView</code></a> cache in development on file changes</p>

<p>To speed up development mode, view caches are only cleared when files in the view paths have changed. Applications which have implemented custom <code>ActionView::Resolver</code> subclasses may need to add their own cache clearing.</p>

<p><em>John Hawthorn</em></p>
</li><li>
<p>Fix <code>ActionView::FixtureResolver</code> so that it handles template variants correctly.</p>

<p><em>Edward Rudd</em></p>
</li><li>
<p><code>ActionView::TemplateRender.render(file: )</code> now renders the file directly, without using any handlers, using the new <code>Template::RawFile</code> class.</p>

<p><em>John Hawthorn</em>, <em>Cliff Pruitt</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta3+-28March+11-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta3 (March 11, 2019)</h2>
<ul><li>
<p>Only accept formats from registered mime types</p>

<p>A lack of filtering on mime types could allow an attacker to read arbitrary files on the target server or to perform a denial of service attack.</p>

<p>Fixes CVE-2019-5418 Fixes CVE-2019-5419</p>

<p><em>John Hawthorn</em>, <em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta2+-28February+25-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta2 (February 25, 2019)</h2>
<ul><li>
<p><code>ActionView::Template.finalize_compiled_template_methods</code> is deprecated with no replacement.</p>

<p><em>tenderlove</em></p>
</li><li>
<p><code>config.action_view.finalize_compiled_template_methods</code> is deprecated with no replacement.</p>

<p><em>tenderlove</em></p>
</li><li>
<p>Ensure unique DOM IDs for collection inputs with float values.</p>

<p>Fixes #34974.</p>

<p><em>Mark Edmondson</em></p>
</li><li>
<p>Single arity template handlers are deprecated. Template handlers must now accept two parameters, the view object and the source for the view object.</p>

<p><em>tenderlove</em></p>
</li></ul>

<h2 id="label-Rails+6.0.0.beta1+-28January+18-2C+2019-29"><a href="../../classes/Rails.html"><code>Rails</code></a> 6.0.0.beta1 (January 18, 2019)</h2>
<ul><li>
<p><a href="https://github.com/rails/rails/pull/34905">Rename npm package</a> from <a href="https://www.npmjs.com/package/rails-ujs">rails-ujs</a> to <a href="https://www.npmjs.com/package/@rails/ujs">@rails/ujs</a>.</p>

<p><em>Javan Makhmali</em></p>
</li><li>
<p>Remove deprecated <code>image_alt</code> helper.</p>

<p><em>Rafael Mendonça França</em></p>
</li><li>
<p>Fix the need of <code>#protect_against_forgery?</code> method defined in <code>ActionView::Base</code> subclasses. This prevents the use of forms and buttons.</p>

<p><em>Genadi Samokovarov</em></p>
</li><li>
<p>Fix UJS permanently showing disabled text in <a href="data-remote">a</a>[data-disable-with] elements within forms.</p>

<p>Fixes #33889.</p>

<p><em>Wolfgang Hobmaier</em></p>
</li><li>
<p>Prevent non-primary mouse keys from triggering <a href="../../classes/Rails.html"><code>Rails</code></a> UJS click handlers. Firefox fires click events even if the click was triggered by non-primary mouse keys such as right- or scroll-wheel-clicks. For example, right-clicking a link such as the one described below (with an underlying ajax request registered on click) should not cause that request to occur.</p>

<pre><code>&lt;%= link_to &#39;Remote&#39;, remote_path, class: &#39;remote&#39;, remote: true, data: { type: :json } %&gt;
</code></pre>

<p>Fixes #34541.</p>

<p><em>Wolfgang Hobmaier</em></p>
</li><li>
<p>Prevent <code>ActionView::TextHelper#word_wrap</code> from unexpectedly stripping white space from the <em>left</em> side of lines.</p>

<p>For example, given input like this:</p>

<pre><code>This is a paragraph with an initial indent,
followed by additional lines that are not indented,
and finally terminated with a blockquote:
  &quot;A pithy saying&quot;
</code></pre>

<p>Calling <code>word_wrap</code> should not trim the indents on the first and last lines.</p>

<p>Fixes #34487.</p>

<p><em>Lyle Mullican</em></p>
</li><li>
<p>Add allocations to template rendering instrumentation.</p>

<p>Adds the allocations for template and partial rendering to the server output on render.</p>

<pre><code>Rendered posts/_form.html.erb (Duration: 7.1ms | Allocations: 6004)
  Rendered posts/new.html.erb within layouts/application (Duration: 8.3ms | Allocations: 6654)
Completed 200 OK in 858ms (Views: 848.4ms | ActiveRecord: 0.4ms | Allocations: 1539564)
</code></pre>

<p><em>Eileen M. Uchitelle</em>, <em>Aaron Patterson</em></p>
</li><li>
<p>Respect the <code>only_path</code> option passed to <code>url_for</code> when the options are passed in as an array</p>

<p>Fixes #33237.</p>

<p><em>Joel Ambass</em></p>
</li><li>
<p>Deprecate calling private model methods from view helpers.</p>

<p>For example, in methods like <code>options_from_collection_for_select</code> and <code>collection_select</code> it is possible to call private methods from the objects used.</p>

<p>Fixes #33546.</p>

<p><em>Ana María Martínez Gómez</em></p>
</li><li>
<p>Fix issue with <code>button_to</code>&#39;s <code>to_form_params</code></p>

<p><code>button_to</code> was throwing exception when invoked with <code>params</code> hash that contains symbol and string keys. The reason for the exception was that <code>to_form_params</code> was comparing the given symbol and string keys.</p>

<p>The issue is fixed by turning all keys to strings inside <code>to_form_params</code> before comparing them.</p>

<p><em>Georgi Georgiev</em></p>
</li><li>
<p>Mark arrays of translations as trusted safe by using the <code>_html</code> suffix.</p>

<p>Example:</p>

<pre><code>en:
  foo_html:
    - &quot;One&quot;
    - &quot;&lt;strong&gt;Two&lt;/strong&gt;&quot;
    - &quot;Three &amp;#128075; &amp;#128578;&quot;
</code></pre>

<p><em>Juan Broullon</em></p>
</li><li>
<p>Add <code>year_format</code> option to date_select tag. This option makes it possible to customize year names. Lambda should be passed to use this option.</p>

<p>Example:</p>

<pre><code>date_select(&#39;user_birthday&#39;, &#39;&#39;, start_year: 1998, end_year: 2000, year_format: -&gt;year { &quot;Heisei #{year - 1988}&quot; })
</code></pre>

<p>The HTML produced:</p>

<pre><code>&lt;select id=&quot;user_birthday__1i&quot; name=&quot;user_birthday[(1i)]&quot;&gt;
&lt;option value=&quot;1998&quot;&gt;Heisei 10&lt;/option&gt;
&lt;option value=&quot;1999&quot;&gt;Heisei 11&lt;/option&gt;
&lt;option value=&quot;2000&quot;&gt;Heisei 12&lt;/option&gt;
&lt;/select&gt;
/* The rest is omitted */
</code></pre>

<p><em>Koki Ryu</em></p>
</li><li>
<p>Fix JavaScript views rendering does not work with Firefox when using Content Security Policy.</p>

<p>Fixes #32577.</p>

<p><em>Yuji Yaginuma</em></p>
</li><li>
<p>Add the <code>nonce: true</code> option for <code>javascript_include_tag</code> helper to support automatic nonce generation for Content Security Policy. Works the same way as <code>javascript_tag nonce: true</code> does.</p>

<p><em>Yaroslav Markin</em></p>
</li><li>
<p>Remove <code>ActionView::Helpers::RecordTagHelper</code>.</p>

<p><em>Yoshiyuki Hirano</em></p>
</li><li>
<p>Disable <code>ActionView::Template</code> finalizers in test environment.</p>

<p>Template finalization can be expensive in large view test suites. Add a configuration option, <code>action_view.finalize_compiled_template_methods</code>, and turn it off in the test environment.</p>

<p><em>Simon Coffey</em></p>
</li><li>
<p>Extract the <code>confirm</code> call in its own, overridable method in <code>rails_ujs</code>.</p>

<p>Example:</p>

<pre><code>Rails.confirm = function(message, element) {
  return (my_bootstrap_modal_confirm(message));
}
</code></pre>

<p><em>Mathieu Mahé</em></p>
</li><li>
<p>Enable select tag helper to mark <code>prompt</code> option as <code>selected</code> and/or <code>disabled</code> for <code>required</code> field.</p>

<p>Example:</p>

<pre><code>select :post,
       :category,
       [&quot;lifestyle&quot;, &quot;programming&quot;, &quot;spiritual&quot;],
       { selected: &quot;&quot;, disabled: &quot;&quot;, prompt: &quot;Choose one&quot; },
       { required: true }
</code></pre>

<p>Placeholder option would be selected and disabled.</p>

<p>The HTML produced:</p>

<pre><code>&lt;select required=&quot;required&quot; name=&quot;post[category]&quot; id=&quot;post_category&quot;&gt;
&lt;option disabled=&quot;disabled&quot; selected=&quot;selected&quot; value=&quot;&quot;&gt;Choose one&lt;/option&gt;
&lt;option value=&quot;lifestyle&quot;&gt;lifestyle&lt;/option&gt;
&lt;option value=&quot;programming&quot;&gt;programming&lt;/option&gt;
&lt;option value=&quot;spiritual&quot;&gt;spiritual&lt;/option&gt;&lt;/select&gt;
</code></pre>

<p><em>Sergey Prikhodko</em></p>
</li><li>
<p>Don&#39;t enforce UTF-8 by default.</p>

<p>With the disabling of TLS 1.0 by most major websites, continuing to run IE8 or lower becomes increasingly difficult so default to not enforcing UTF-8 encoding as it&#39;s not relevant to other browsers.</p>

<p><em>Andrew White</em></p>
</li><li>
<p>Change translation key of <code>submit_tag</code> from <code>module_name_class_name</code> to <code>module_name/class_name</code>.</p>

<p><em>Rui Onodera</em></p>
</li><li>
<p><a href="../../classes/Rails.html"><code>Rails</code></a> 6 requires Ruby 2.5.0 or newer.</p>

<p><em>Jeremy Daer</em>, <em>Kasper Timm Hansen</em></p>
</li></ul>

<p>Please check <a href="https://github.com/rails/rails/blob/5-2-stable/actionview/CHANGELOG.md">5-2-stable</a> for previous changes.</p>

    </div>
  


  


  
  


  


  

  



  

    

    

    


    


    <!-- Methods -->
    
    
    
  
</div>

    </div>
  </body>
</html>
